# MotoMod 啟動指南

## 1. 使用 Node.js 直接啟動

### 準備工作
1. 確保已安裝 Node.js (v14 或更高版本)
2. 確保已安裝 MongoDB 並運行在本機

### 啟動步驟
1. 安裝依賴套件:
```bash
npm install
```

2. 初始化資料庫 (選擇性):
```bash
node initDB.js
```

3. 啟動開發模式:
```bash
npm run dev
```
或者啟動生產模式:
```bash
npm start
```

4. 訪問網站: http://localhost:3001

## 2. 使用 Docker Compose 啟動 (推薦)

### 準備工作
1. 確保已安裝 Docker 和 Docker Compose

### 啟動步驟
1. 使用 Docker Compose 啟動整個應用:
```bash
docker-compose up -d
```

2. 初始化資料庫 (選擇性):
```bash
docker-compose exec app node initDB.js
```

3. 訪問網站: http://localhost:3001

## 3. 常見問題

### 端口被佔用
如果 3001 端口已被佔用，可以修改 `.env` 文件或環境變數中的 `PORT` 變數:
```
PORT=3002
```
然後重新啟動應用。

### MongoDB 連接失敗
確保 MongoDB 服務已經啟動:
- 如果使用本機 MongoDB: 檢查 MongoDB 服務是否運行
- 如果使用 Docker: 執行 `docker-compose ps` 檢查 mongo 服務是否正常運行

### MongoDB Atlas 連接問題
如果您使用 MongoDB Atlas 雲服務，可能會遇到 `TLSV1_ALERT_INTERNAL_ERROR` 或 SSL 相關錯誤。這通常是因為您的 IP 地址未被授權訪問 Atlas 集群。

**解決方法:**
1. 登入 [MongoDB Atlas 控制台](https://cloud.mongodb.com)
2. 進入您的集群設置
3. 點擊左側導航欄中的「Network Access」
4. 點擊「Add IP Address」按鈕
5. 添加您當前的 IP 地址或臨時選擇「Allow Access from Anywhere」(0.0.0.0/0)
6. 點擊「Confirm」保存設置
7. 等待幾分鐘讓設置生效
8. 重新啟動應用

### 本地/Docker MongoDB 配置
如果您希望使用本地或 Docker 中的 MongoDB 而非 Atlas:
1. 確保 MONGO_URI 環境變量設置為: `mongodb://localhost:27017/motomod`
   - 如果使用 Docker Compose: `mongodb://mongo:27017/motomod`
2. 啟動本地 MongoDB 服務或 Docker 容器

### Windows 下運行 MongoDB
在 Windows 下安裝 MongoDB:
1. 從 [MongoDB 下載頁面](https://www.mongodb.com/try/download/community) 下載 Community Edition
2. 按照安裝向導完成安裝
3. 創建數據目錄: `mkdir -p C:\data\db`
4. 啟動 MongoDB 服務: `"C:\Program Files\MongoDB\Server\<版本>\bin\mongod.exe" --dbpath="C:\data\db"`

## 4. 管理員帳號
初始管理員帳號:
- 用戶名: admin
- 密碼: admin123

## 5. 測試用戶帳號
一般用戶帳號:
- 用戶名: user
- 密碼: user123 
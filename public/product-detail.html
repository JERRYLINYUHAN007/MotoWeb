<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>產品詳細資訊 - MotoWeb</title>
    <meta name="description" content="查看摩托車改裝零件的詳細規格、價格和購買資訊">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/tech-theme.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        /* 產品詳情頁面專用樣式 - 現代科技風格 */
        body {
            background: var(--secondary-color);
            margin-top: 80px;
        }

        .product-detail-main {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 2rem;
        }

        .breadcrumb {
            list-style: none;
            padding: 1rem 2rem;
            margin-bottom: 2rem;
            background: linear-gradient(145deg, var(--mid-surface), var(--dark-surface));
            border-radius: 15px;
            border: 1px solid var(--carbon-gray);
            box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .breadcrumb li {
            display: inline;
            font-size: 1rem;
            color: var(--metallic-silver);
            font-weight: 500;
        }

        .breadcrumb li a {
            color: var(--primary-color);
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .breadcrumb li a:hover {
            color: var(--success-color);
            text-shadow: 0 0 10px rgba(0, 255, 136, 0.3);
        }

        .breadcrumb li::after {
            content: '>';
            margin: 0 1rem;
            color: var(--carbon-gray);
        }

        .breadcrumb li:last-child {
            color: white;
            font-weight: 600;
        }

        .breadcrumb li:last-child::after {
            content: '';
        }

        .product-detail-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 3rem;
            background: linear-gradient(145deg, var(--mid-surface), var(--dark-surface));
            padding: 3rem;
            border-radius: 20px;
            box-shadow: 
                0 15px 40px rgba(0, 0, 0, 0.5),
                0 0 30px rgba(0, 212, 255, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            border: 2px solid var(--primary-color);
            position: relative;
            overflow: hidden;
        }

        .product-detail-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, 
                var(--primary-color), 
                var(--accent-color), 
                var(--success-color));
        }

        .product-image-section {
            position: relative;
        }

        .product-image-section img {
            width: 100%;
            height: auto;
            border-radius: 15px;
            border: 2px solid var(--carbon-gray);
            object-fit: cover;
            box-shadow: 
                0 8px 25px rgba(0, 0, 0, 0.4),
                0 0 20px rgba(0, 212, 255, 0.1);
            transition: all 0.3s ease;
        }

        .product-image-section img:hover {
            border-color: var(--primary-color);
            box-shadow: 
                0 15px 40px rgba(0, 0, 0, 0.5),
                0 0 30px rgba(0, 212, 255, 0.3);
            transform: scale(1.02);
        }

        .product-info-section .product-title {
            font-size: 2.5rem;
            font-weight: 700;
            color: white;
            margin-bottom: 1rem;
            background: linear-gradient(45deg, 
                white, 
                var(--primary-color), 
                var(--accent-color));
            background-size: 300% 300%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: neonGlow 4s ease-in-out infinite;
            text-shadow: 0 0 20px rgba(0, 212, 255, 0.3);
        }

        .product-info-section .product-brand {
            font-size: 1.2rem;
            color: var(--metallic-silver);
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }
        
        .product-info-section .product-brand a {
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .product-info-section .product-brand a:hover {
            color: var(--success-color);
            text-shadow: 0 0 10px rgba(0, 255, 136, 0.3);
        }

        .product-info-section .product-price {
            font-size: 2.2rem;
            font-weight: 700;
            color: var(--success-color);
            margin-bottom: 2rem;
            text-shadow: 0 0 15px rgba(0, 255, 136, 0.5);
            animation: cyberpulse 3s infinite;
        }

        .product-info-section .product-short-description {
            font-size: 1.1rem;
            line-height: 1.7;
            margin-bottom: 2rem;
            color: var(--metallic-silver);
            background: linear-gradient(145deg, var(--dark-surface), var(--mid-surface));
            padding: 1.5rem;
            border-radius: 12px;
            border: 1px solid var(--carbon-gray);
            box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .product-actions {
            background: linear-gradient(145deg, var(--dark-surface), var(--mid-surface));
            padding: 2rem;
            border-radius: 15px;
            border: 1px solid var(--carbon-gray);
            box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .product-actions .quantity-selector {
            margin-bottom: 2rem;
        }

        .product-actions label {
            margin-right: 1rem;
            font-weight: 600;
            color: white;
            font-size: 1.1rem;
        }

        .product-actions input[type="number"] {
            width: 80px;
            padding: 0.8rem;
            text-align: center;
            border: 2px solid var(--carbon-gray);
            border-radius: 10px;
            background: linear-gradient(145deg, var(--mid-surface), var(--dark-surface));
            color: white;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .product-actions input[type="number"]:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 15px rgba(0, 212, 255, 0.3);
        }

        .product-actions .add-to-cart-btn {
            background: linear-gradient(45deg, var(--primary-color), var(--accent-color));
            color: white;
            padding: 1.2rem 2.5rem;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-size: 1.2rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            transition: all 0.3s ease;
            width: 100%;
            text-align: center;
            box-shadow: 
                0 8px 25px rgba(0, 212, 255, 0.4),
                0 0 30px rgba(124, 58, 237, 0.2);
            border: 2px solid var(--success-color);
            position: relative;
            overflow: hidden;
        }

        .product-actions .add-to-cart-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 255, 255, 0.3), 
                transparent);
            transition: left 0.5s ease;
        }

        .product-actions .add-to-cart-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 
                0 15px 40px rgba(0, 212, 255, 0.6),
                0 0 60px var(--primary-color);
            animation: cyberpulse 0.6s ease-in-out infinite;
        }

        .product-actions .add-to-cart-btn:hover::before {
            left: 100%;
        }
        
        .product-additional-details {
            margin-top: 3rem;
            background: linear-gradient(145deg, var(--mid-surface), var(--dark-surface));
            padding: 3rem;
            border-radius: 20px;
            box-shadow: 
                0 15px 40px rgba(0, 0, 0, 0.5),
                0 0 30px rgba(0, 212, 255, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            border: 2px solid var(--primary-color);
        }

        .product-additional-details h3 {
            font-size: 2rem;
            color: white;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--carbon-gray);
            font-weight: 700;
            text-shadow: 0 0 15px rgba(0, 212, 255, 0.3);
        }

        .product-additional-details .description-content,
        .product-additional-details .specs-content {
            font-size: 1.1rem;
            line-height: 1.8;
            color: var(--metallic-silver);
        }
        
        .product-additional-details .specs-content ul {
            list-style: none;
            padding-left: 0;
        }

        .product-additional-details .specs-content li {
            padding: 1rem 0;
            border-bottom: 1px dashed var(--carbon-gray);
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
        }

        .product-additional-details .specs-content li:hover {
            background: rgba(0, 212, 255, 0.1);
            padding-left: 1rem;
            border-radius: 8px;
        }

        .product-additional-details .specs-content li:last-child {
            border-bottom: none;
        }

        .product-additional-details .specs-content li strong {
            color: var(--primary-color);
            min-width: 150px;
            font-weight: 600;
        }

        .product-additional-details .specs-content li span {
            color: white;
            font-weight: 500;
        }

        /* 返回按鈕 */
        .back-button {
            position: fixed;
            top: 100px;
            left: 20px;
            z-index: 100;
            background: linear-gradient(145deg, var(--mid-surface), var(--dark-surface));
            border: 2px solid var(--primary-color);
            color: var(--primary-color);
            padding: 12px 16px;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 
                0 4px 15px rgba(0, 212, 255, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .back-button:hover {
            background: linear-gradient(45deg, var(--primary-color), var(--neon-blue));
            color: white;
            transform: translateY(-3px) scale(1.1);
            box-shadow: 
                0 8px 25px rgba(0, 212, 255, 0.4),
                0 0 30px var(--primary-color);
        }

        /* 響應式設計 */
        @media (max-width: 992px) {
            .product-detail-container {
                grid-template-columns: 1fr;
                gap: 2rem;
            }
            }

        @media (max-width: 768px) {
            .product-detail-main {
                padding: 0 1rem;
            }

            .product-detail-container {
                padding: 2rem;
            }

            .product-info-section .product-title {
                font-size: 2rem;
            }

            .product-info-section .product-price {
                font-size: 1.8rem;
            }

            .back-button {
                position: static;
                margin-bottom: 1rem;
                width: auto;
                height: auto;
                padding: 12px 20px;
                border-radius: 30px;
            }
        }

        @media (max-width: 480px) {
             .product-info-section .product-title {
                font-size: 1.6rem;
            }

            .product-info-section .product-price {
                font-size: 1.5rem;
            }

            .product-additional-details .specs-content li {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.5rem;
            }
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="container nav-container">
            <div class="logo">
                <a href="index.html" aria-label="MotoWeb首頁">
                    <img src="images/motoweb-logo.svg" alt="MotoWeb Logo" class="logo-img">
                    <h1>MotoWeb</h1>
                </a>
            </div>
            <div class="nav-links" id="navLinks">
                <div class="main-nav">
                    <a href="index.html">首頁</a>
                    <a href="products.html" class="active" aria-current="page">改裝零件</a>
                    <a href="community.html">社群討論</a>
                    <a href="gallery.html">作品展示</a>
                    <a href="events.html">改裝活動</a>
                    <a href="about.html">關於我們</a>
                </div>
                <div class="auth-buttons">
                    <a href="login.html" class="btn btn-secondary">登入</a>
                    <a href="register.html" class="btn btn-primary">註冊</a>
                </div>
                <div class="user-menu" style="display: none;">
                    <div class="user-avatar">
                        <img src="/images/default-avatar.svg" alt="用戶頭像" class="avatar">
                        <span class="username">用戶名稱</span>
                    </div>
                    <div class="dropdown-menu">
                        <a href="/profile.html"><i class="fas fa-user"></i> 個人資料</a>
                        <a href="/garage.html"><i class="fas fa-motorcycle"></i> 我的車庫</a>
                        <a href="/settings.html"><i class="fas fa-cog"></i> 帳號設定</a>
                        <a href="#" id="logout"><i class="fas fa-sign-out-alt"></i> 登出</a>
                    </div>
                </div>
            </div>
            <button class="menu-toggle" aria-label="展開選單" aria-expanded="false" aria-controls="navLinks">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </button>
        </div>
    </nav>

    <!-- 返回按鈕 -->
    <button class="back-button" onclick="history.back()" aria-label="返回上一頁">
        <i class="fas fa-arrow-left"></i>
    </button>

    <main class="product-detail-main">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb" id="breadcrumb-container">
                <!-- Breadcrumbs will be populated by JavaScript -->
            </ol>
        </nav>

        <div id="product-not-found" style="display:none; text-align:center; padding: 2rem;">
            <h2><i class="fas fa-exclamation-triangle"></i> 找不到產品</h2>
            <p>抱歉，我們找不到您所選的產品。請返回<a href="products.html">產品列表</a>頁面。</p>
        </div>

        <section class="product-detail-container" id="product-detail-content">
            <div class="product-image-section">
                <img id="product-image" src="images/parts/placeholder-product.png" alt="產品圖片">
                <!-- TODO: Image gallery thumbnails could go here -->
            </div>

            <div class="product-info-section">
                <h1 id="product-name" class="product-title">產品名稱載入中...</h1>
                <p class="product-brand">品牌: <a href="#" id="product-brand-link"><span id="product-brand">N/A</span></a></p>
                <p id="product-price" class="product-price">NT$0</p>
                
                <div id="product-short-description" class="product-short-description">
                    <p>產品簡介載入中...</p>
                </div>

                <div class="product-actions">
                    <div class="quantity-selector">
                        <label for="quantity">數量:</label>
                        <input type="number" id="quantity" name="quantity" value="1" min="1">
                    </div>
                    <button id="add-to-cart-btn" class="add-to-cart-btn">
                        <i class="fas fa-shopping-cart"></i> 加入購物車
                    </button>
                </div>
            </div>
        </section>

        <section class="product-additional-details" id="product-additional-content">
            <div class="product-description">
                <h3><i class="fas fa-file-alt"></i> 商品詳情</h3>
                <div id="product-full-description" class="description-content">
                    <p>詳細說明載入中...</p>
                </div>
            </div>
            <hr style="margin: 2rem 0; border-color: #eee;">
            <div class="product-specs">
                <h3><i class="fas fa-list-ul"></i> 商品規格</h3>
                <div id="product-specifications" class="specs-content">
                    <ul>
                        <li><strong>規格:</strong> 載入中...</li>
                    </ul>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <!-- Footer content will be inserted by common.js -->
    </footer>

    <script src="/js/common.js"></script>
    <script src="js/auth-state.js"></script>
    <script>
        // Mock product data (This should ideally be in a shared file or fetched from a backend)
        // Adding more fields like shortDescription, fullDescription, specifications
         const mockProductDetailDB = {
            "jet-z2-fork": { 
                id: "jet-z2-fork", name: "【怪獸工廠Z2 PRO前叉】", price: 18800, image: "images/parts/怪獸工廠Z2 PRO前叉.webp", 
                category: "sym-jet-suspension", mainCategory: "sym-jet", brand: "怪獸工廠", dateAdded: "2024-05-01",
                shortDescription: "專為JET車系設計的高性能Z2 PRO前避震器，提供卓越的操控性和舒適度。",
                fullDescription: "<p>怪獸工廠最新力作 Z2 PRO 前叉避震器，採用精密CNC加工與強化阻尼設定，有效吸收路面衝擊，提升騎乘穩定性。無論是賽道競技或山路遨遊，都能帶來極致的駕馭體驗。</p><p>特性：<br>- 客製化配色選擇<br>- 預載、阻尼可調<br>- 輕量化高剛性材質</p>",
                specifications: { "適用車種": "SYM JET 系列", "材質": "航太級鋁合金", "保固": "一年原廠保固" }
            },
            "mmbcu-brembo-caliper": {
                id: "mmbcu-brembo-caliper", name: "【Brembo MMBCU對四卡鉗】基本對四系列", price: 7800, image: "images/parts/ANC72大對四卡鉗.webp",
                category: "sym-mmbcu-brake", mainCategory: "sym-mmbcu", brand: "Brembo", dateAdded: "2024-03-01",
                shortDescription: "義大利Brembo出品，MMBCU專用對四活塞卡鉗，提供強勁且線性的制動力。",
                fullDescription: "<p>提升愛車制動性能的最佳選擇之一。Brembo基本對四卡鉗，提供優異的煞車手感與力道，確保行車安全。陽極黑配色低調帥氣。</p>",
                specifications: { "適用車種": "SYM MMBCU", "活塞": "對向四活塞", "材質": "鍛造鋁合金", "顏色": "陽極黑" }
            },
            "jet-simota-mirror": { 
                id: "jet-simota-mirror", name: "【SIMOTA碳纖維後照鏡】", price: 8000, image: "images/parts/SIMOTA碳纖維後照鏡.webp", 
                category: "sym-jet-appearance", mainCategory: "sym-jet", brand: "SIMOTA", dateAdded: "2024-04-20",
                shortDescription: "輕量化SIMOTA碳纖維後照鏡，藍鏡鏡面，造型獨特，提升愛車質感。",
                fullDescription: "<p>SIMOTA出品的高質感碳纖維後照鏡，採用正碳纖維材質，兼具輕量化與高強度。獨特的造型設計，讓您的愛車更具戰鬥氣息。鏡面採用防眩光藍鏡，提升夜間行車安全。</p>",
                specifications: { "適用車種": "通用型 (附各車系轉接座)", "材質": "碳纖維 + 鋁合金", "鏡面": "防眩光藍鏡" }
            },
            "jet-masa-disk-fixed": {
                id: "jet-masa-disk-fixed", name: "【MASA固定碟盤-劃線版】", price: 3200, image: "images/parts/MASA固定碟盤-劃線版.webp",
                category: "sym-jet-brake", mainCategory: "sym-jet", brand: "MASA", dateAdded: "2024-04-15",
                shortDescription: "MASA高品質固定碟盤，採用特殊劃線設計，提供更好的制動效果。",
                fullDescription: "<p>MASA固定碟盤採用高品質不銹鋼材質，特殊劃線設計有效提升制動效果，同時具備優異的散熱性能。適合日常騎乘使用，提供穩定可靠的制動力道。</p>",
                specifications: { "適用車種": "SYM JET系列", "材質": "不銹鋼", "尺寸": "原廠規格" }
            },
            "jet-koso-taillight": {
                id: "jet-koso-taillight", name: "【KOSO衝刺尾燈】", price: 2800, image: "images/parts/KOSO衝刺尾燈.webp",
                category: "sym-jet-appearance", mainCategory: "sym-jet", brand: "KOSO", dateAdded: "2024-04-10",
                shortDescription: "KOSO新款LED尾燈，流線型設計，提供更好的視覺效果和安全性。",
                fullDescription: "<p>KOSO衝刺尾燈採用最新LED光源技術，具備日行燈功能，夜間行車更安全。流線型外觀設計完美融入車體，安裝簡單，即插即用。</p>",
                specifications: { "適用車種": "SYM JET系列", "光源": "LED", "功能": "煞車燈/位置燈/方向燈" }
            },
            "jet-baphomet-fuel-cap": {
                id: "jet-baphomet-fuel-cap", name: "【巴風特油箱蓋】", price: 1500, image: "images/parts/巴風特油箱蓋.webp",
                category: "sym-jet-appearance", mainCategory: "sym-jet", brand: "巴風特", dateAdded: "2024-04-05",
                shortDescription: "CNC切削加工油箱蓋，造型獨特，安裝簡單。",
                fullDescription: "<p>巴風特油箱蓋採用航太級鋁合金材質，CNC精密切削加工，表面經過硬質陽極處理，耐用度高。造型獨特，安裝簡單，可直接替換原廠油箱蓋。</p>",
                specifications: { "適用車種": "SYM JET系列", "材質": "鋁合金", "表面處理": "硬質陽極" }
            },
            "jet-apexx-gt-exhaust-cover": {
                id: "jet-apexx-gt-exhaust-cover", name: "【APEXX GT防燙蓋】", price: 2200, image: "images/parts/APEXX GT防燙蓋.webp",
                category: "sym-jet-appearance", mainCategory: "sym-jet", brand: "APEXX", dateAdded: "2024-04-01",
                shortDescription: "APEXX GT系列排氣管防燙蓋，有效降低燙傷風險。",
                fullDescription: "<p>APEXX GT防燙蓋採用特殊隔熱材質，有效降低排氣管表面溫度，防止燙傷。外觀設計時尚，與車體完美融合，安裝簡單。</p>",
                specifications: { "適用車種": "SYM JET系列", "材質": "特殊隔熱材質", "重量": "輕量化設計" }
            },
            "jet-gjms-tcd2000": {
                id: "jet-gjms-tcd2000", name: "【GJMS TCD2000前叉】", price: 16800, image: "images/parts/GJMS TCD2000前叉.webp",
                category: "sym-jet-suspension", mainCategory: "sym-jet", brand: "GJMS", dateAdded: "2024-03-25",
                shortDescription: "GJMS頂級TCD2000前叉，提供卓越的操控性和舒適性。",
                fullDescription: "<p>GJMS TCD2000前叉採用先進的阻尼控制技術，提供優異的路感和穩定性。全可調設計，可根據騎士需求進行個性化調整，適合運動騎乘和日常通勤。</p>",
                specifications: { "適用車種": "SYM JET系列", "功能": "預載/回彈可調", "材質": "特殊鋁合金" }
            },
            "jet-apexx-eye": {
                id: "jet-apexx-eye", name: "【APEXX媚眼】", price: 3500, image: "images/parts/APEXX媚眼.webp",
                category: "sym-jet-appearance", mainCategory: "sym-jet", brand: "APEXX", dateAdded: "2024-03-20",
                shortDescription: "APEXX媚眼大燈飾蓋，造型獨特，提升車頭視覺效果。",
                fullDescription: "<p>APEXX媚眼大燈飾蓋採用高品質ABS材質，精密射出成型，安裝簡單，不需修改原車線路。獨特的造型設計，讓您的愛車在人群中脫穎而出。</p>",
                specifications: { "適用車種": "SYM JET系列", "材質": "ABS", "顏色": "亮黑" }
            },
            "jet-koso-filter": {
                id: "jet-koso-filter", name: "【KOSO燻黑透明空濾蓋】", price: 1800, image: "images/parts/KOSO燻黑透明空濾蓋.webp",
                category: "sym-jet-power", mainCategory: "sym-jet", brand: "KOSO", dateAdded: "2024-03-15",
                shortDescription: "KOSO燻黑透明空濾蓋，展現引擎內部美學。",
                fullDescription: "<p>KOSO燻黑透明空濾蓋採用高品質透明材質，燻黑處理展現低調奢華感。透過透明設計，可以清楚看到引擎內部運作，同時保護空濾不受污染。</p>",
                specifications: { "適用車種": "SYM JET系列", "材質": "高強度透明材質", "顏色": "燻黑" }
            },
            "jet-guangsheng-bone": {
                id: "jet-guangsheng-bone", name: "【廣昇999R CNC 鋁合金排骨】", price: 4500, image: "images/parts/廣昇999R CNC 鋁合金排骨.webp",
                category: "sym-jet-power", mainCategory: "sym-jet", brand: "廣昇", dateAdded: "2024-03-10",
                shortDescription: "廣昇CNC切削鋁合金排骨，提升引擎動力輸出。",
                fullDescription: "<p>廣昇999R CNC鋁合金排骨採用高強度鋁合金材質，透過CNC精密切削加工，減輕重量同時提升強度。優化進氣流道，有效提升引擎動力輸出和加速性能。</p>",
                specifications: { "適用車種": "SYM JET系列", "材質": "鋁合金", "顏色": "陽極紅" }
            },
            "jet-snake-exhaust": {
                id: "jet-snake-exhaust", name: "【毒蛇SP1合格砲管】", price: 9800, image: "images/parts/毒蛇SP1合格砲管.webp",
                category: "sym-jet-power", mainCategory: "sym-jet", brand: "毒蛇", dateAdded: "2024-03-05",
                shortDescription: "毒蛇SP1合格排氣管，通過噪音檢測，提供優質聲浪和動力。",
                fullDescription: "<p>毒蛇SP1合格砲管採用高品質不銹鋼材質，經過精密焊接和拋光處理，外觀亮麗。特殊的內部設計，提供渾厚有力的聲浪，同時通過噪音檢測，合法上路無虞。</p>",
                specifications: { "適用車種": "SYM JET系列", "材質": "不銹鋼", "認證": "噪音合格" }
            },
            "jet-monster-zr": {
                id: "jet-monster-zr", name: "【怪獸工廠ZR後避震】", price: 12800, image: "images/parts/怪獸工廠ZR後避震.webp",
                category: "sym-jet-suspension", mainCategory: "sym-jet", brand: "怪獸工廠", dateAdded: "2024-03-01",
                shortDescription: "怪獸工廠ZR後避震，全可調設計，提供卓越的操控性和舒適度。",
                fullDescription: "<p>怪獸工廠ZR後避震採用特殊的阻尼控制技術，提供優異的路感和穩定性。預載、回彈、壓縮全可調設計，可根據騎士體重和騎乘習慣進行個性化調整，適合運動騎乘和日常通勤。</p>",
                specifications: { "適用車種": "SYM JET系列", "功能": "預載/回彈/壓縮可調", "材質": "特殊鋁合金" }
            },
            "jet-limit-fuel-cap": {
                id: "jet-limit-fuel-cap", name: "【LIMIT日規油箱蓋】", price: 1800, image: "images/parts/LIMIT日規油箱蓋.webp",
                category: "sym-jet-appearance", mainCategory: "sym-jet", brand: "LIMIT", dateAdded: "2024-02-25",
                shortDescription: "LIMIT日規油箱蓋，日系風格設計，提升質感。",
                fullDescription: "<p>LIMIT日規油箱蓋採用高品質鋁合金材質，CNC精密切削加工，表面經過硬質陽極處理，耐用度高。日系風格設計，低調內斂，安裝簡單，可直接替換原廠油箱蓋。</p>",
                specifications: { "適用車種": "SYM JET系列", "材質": "鋁合金", "表面處理": "硬質陽極" }
            },
            "jet-skuny-screen": {
                id: "jet-skuny-screen", name: "【SKUNY硬式螢幕保護殼】", price: 1200, image: "images/parts/SKUNY硬式螢幕保護殼.webp",
                category: "sym-jet-appearance", mainCategory: "sym-jet", brand: "SKUNY", dateAdded: "2024-02-20",
                shortDescription: "SKUNY硬式儀表螢幕保護殼，有效防刮防水。",
                fullDescription: "<p>SKUNY硬式螢幕保護殼採用高透光度強化材質，有效防止儀表螢幕刮傷和水氣滲入。全包覆設計，安裝簡單，不影響觸控功能，提供最佳保護。</p>",
                specifications: { "適用車種": "SYM JET系列", "材質": "高透光度強化材質", "功能": "防刮/防水/防塵" }
            },
            "jet-skuny-headlight": {
                id: "jet-skuny-headlight", name: "【SKUNY大燈護甲】", price: 1500, image: "images/parts/SKUNY大燈護甲.webp",
                category: "sym-jet-appearance", mainCategory: "sym-jet", brand: "SKUNY", dateAdded: "2024-02-15",
                shortDescription: "SKUNY大燈護甲，有效保護大燈不受損傷。",
                fullDescription: "<p>SKUNY大燈護甲採用高強度材質，有效保護車頭大燈不受石頭、昆蟲等外物損傷。造型獨特，增添車頭視覺效果，安裝簡單，不影響大燈照明效果。</p>",
                specifications: { "適用車種": "SYM JET系列", "材質": "高強度複合材質", "功能": "防護/裝飾" }
            },
            "jet-ghost-radiator": {
                id: "jet-ghost-radiator", name: "【Ghost Factory 水箱罩】", price: 2200, image: "images/parts/Ghost Factory 水箱罩.webp",
                category: "sym-jet-appearance", mainCategory: "sym-jet", brand: "Ghost Factory", dateAdded: "2024-02-10",
                shortDescription: "Ghost Factory水箱護網，保護水箱不受損傷。",
                fullDescription: "<p>Ghost Factory水箱罩採用高品質不銹鋼材質，精密雷射切割工藝，外觀精美，同時有效保護水箱不受石頭、昆蟲等外物損傷，延長水箱使用壽命。</p>",
                specifications: { "適用車種": "SYM JET系列", "材質": "不銹鋼", "表面處理": "電鍍處理" }
            },
            "jet-masa-disk-float": {
                id: "jet-masa-disk-float", name: "【MASA浮動碟盤】", price: 4500, image: "images/parts/MASA浮動碟盤.webp",
                category: "sym-jet-brake", mainCategory: "sym-jet", brand: "MASA", dateAdded: "2024-02-05",
                shortDescription: "MASA浮動碟盤，提供更好的散熱性能和制動效果。",
                fullDescription: "<p>MASA浮動碟盤採用高品質不銹鋼外盤搭配鋁合金內盤，浮動設計有效降低熱變形，提供更穩定的制動效果。特殊波浪設計增加散熱面積，提升煞車性能和壽命。</p>",
                specifications: { "適用車種": "SYM JET系列", "材質": "不銹鋼+鋁合金", "設計": "浮動式" }
            },
            "drg-far-disk": {
                id: "drg-far-disk", name: "【FAR黑金碟盤】", price: 3800, image: "images/parts/FAR黑金碟盤.webp",
                category: "sym-drg-brake", mainCategory: "sym-drg", brand: "FAR", dateAdded: "2024-02-01",
                shortDescription: "FAR黑金碟盤，黑金塗層處理，提供穩定制動力。",
                fullDescription: "<p>FAR黑金碟盤採用高品質不銹鋼材質，黑金塗層處理防鏽耐用，同時提升外觀質感。特殊開孔設計增加散熱效果，提供穩定的制動力道，適合日常騎乘使用。</p>",
                specifications: { "適用車種": "SYM DRG系列", "材質": "不銹鋼", "表面處理": "黑金塗層" }
            },
            "drg-cowking-exhaust": {
                id: "drg-cowking-exhaust", name: "【牛王SVR排氣管】", price: 12800, image: "images/parts/牛王SVR排氣管.webp",
                category: "sym-drg-power", mainCategory: "sym-drg", brand: "牛王", dateAdded: "2024-01-25",
                shortDescription: "牛王SVR排氣管，提供渾厚聲浪和優異動力表現。",
                fullDescription: "<p>牛王SVR排氣管採用高品質不銹鋼材質，精密焊接工藝，外觀霸氣。特殊內部設計，提供渾厚有力的聲浪，同時提升中高轉動力輸出，讓加速反應更敏銳。</p>",
                specifications: { "適用車種": "SYM DRG系列", "材質": "不銹鋼", "認證": "噪音合格" }
            },
            "drg-arx-fork": {
                id: "drg-arx-fork", name: "【野蠻公牛ARX經典版預載可調前叉】", price: 17800, image: "images/parts/野蠻公牛ARX經典版預載可調前叉.webp",
                category: "sym-drg-suspension", mainCategory: "sym-drg", brand: "野蠻公牛", dateAdded: "2024-01-20",
                shortDescription: "野蠻公牛ARX前叉，預載可調，提供卓越的操控性。",
                fullDescription: "<p>野蠻公牛ARX經典版前叉採用航太級鋁合金材質，預載可調設計，可根據騎士需求進行個性化調整。優異的阻尼控制，有效吸收路面衝擊，提升騎乘舒適度和穩定性。</p>",
                specifications: { "適用車種": "SYM DRG系列", "功能": "預載可調", "材質": "航太級鋁合金" }
            },
            "aj-taillight": {
                id: "aj-taillight", name: "【AJ尾燈】", price: 2500, image: "images/parts/AJ尾燈.webp",
                category: "sym-drg-appearance", mainCategory: "sym-drg", brand: "AJ", dateAdded: "2024-01-15",
                shortDescription: "AJ LED尾燈，流線型設計，提供更好的視覺效果和安全性。",
                fullDescription: "<p>AJ尾燈採用最新LED光源技術，具備日行燈功能，夜間行車更安全。流線型外觀設計完美融入車體，安裝簡單，即插即用，無需修改線路。</p>",
                specifications: { "適用車種": "SYM DRG系列", "光源": "LED", "功能": "煞車燈/位置燈/方向燈" }
            },
            "m7-taillight": {
                id: "m7-taillight", name: "【星爵M7尾燈】", price: 2800, image: "images/parts/星爵M7尾燈.webp",
                category: "sym-drg-appearance", mainCategory: "sym-drg", brand: "星爵", dateAdded: "2024-01-10",
                shortDescription: "星爵M7 LED尾燈，流線型設計，提供更好的視覺效果和安全性。",
                fullDescription: "<p>星爵M7尾燈採用最新LED光源技術，具備日行燈功能，夜間行車更安全。流線型外觀設計完美融入車體，安裝簡單，即插即用，無需修改線路。</p>",
                specifications: { "適用車種": "SYM DRG系列", "光源": "LED", "功能": "煞車燈/位置燈/方向燈" }
            },
            "drg-ohlins-shock": {
                id: "drg-ohlins-shock", name: "【Öhlins DRG後避震】", price: 28000, image: "images/parts/drg-shock-ohlins.jpg",
                category: "sym-drg-suspension", mainCategory: "sym-drg", brand: "Öhlins", dateAdded: "2024-01-05",
                shortDescription: "Öhlins頂級DRG後避震，全可調設計，提供卓越的操控性和舒適度。",
                fullDescription: "<p>Öhlins DRG後避震採用獨家的TTX技術，提供優異的路感和穩定性。預載、回彈、壓縮全可調設計，可根據騎士體重和騎乘習慣進行個性化調整，適合運動騎乘和日常通勤。</p>",
                specifications: { "適用車種": "SYM DRG系列", "功能": "預載/回彈/壓縮可調", "材質": "高強度合金" }
            },
            "ccd-c53-fork": {
                id: "ccd-c53-fork", name: "【CCD C53前叉】", price: 18800, image: "images/parts/CCD C53前叉.webp",
                category: "sym-drg-suspension", mainCategory: "sym-drg", brand: "CCD", dateAdded: "2024-01-01",
                shortDescription: "CCD C53前叉，全可調設計，提供卓越的操控性和舒適度。",
                fullDescription: "<p>CCD C53前叉採用特殊的阻尼控制技術，提供優異的路感和穩定性。預載、回彈、壓縮全可調設計，可根據騎士需求進行個性化調整，適合運動騎乘和日常通勤。</p>",
                specifications: { "適用車種": "SYM DRG系列", "功能": "預載/回彈/壓縮可調", "材質": "特殊鋁合金" }
            }
        };
        
        // Simplified category mapping for breadcrumbs
        const categoryDisplayNames = {
            "all-products": "所有產品",
            // SYM
            "sym-jet": "SYM JET 全車系",
            "sym-jet-power": "JET動力系統",
            "sym-jet-brake": "JET煞車制動",
            "sym-jet-suspension": "JET避震懸吊",
            "sym-jet-appearance": "JET熱門外觀燈系",
            "sym-drg": "SYM DRG",
            "sym-drg-power": "DRG動力系統",
            "sym-drg-brake": "DRG煞車制動",
            "sym-drg-suspension": "DRG避震懸吊",
            "sym-drg-appearance": "DRG熱門外觀燈系",
            "sym-mmbcu": "SYM MMBCU",
            "sym-mmbcu-power": "MMBCU動力系統",
            "sym-mmbcu-brake": "MMBCU煞車制動",
            "sym-mmbcu-suspension": "MMBCU懸吊避震",
            "sym-mmbcu-appearance": "MMBCU熱門外觀燈系",
            // YAMAHA
            "yamaha-cygnus": "YAMAHA CYGNUS GRYPHUS",
            "yamaha-cygnus-power": "CYGNUS GRYPHUS動力系統",
            "yamaha-cygnus-brake": "CYGNUS GRYPHUS煞車制動",
            "yamaha-cygnus-suspension": "CYGNUS GRYPHUS避震懸吊",
            "yamaha-cygnus-appearance": "CYGNUS GRYPHUS熱門外觀燈系",
            "yamaha-force-smax": "YAMAHA FORCE1.0/SMAX",
            "yamaha-force-smax-power": "FORCE1.0/SMAX動力系統",
            "yamaha-force-smax-brake": "FORCE1.0/SMAX煞車制動",
            "yamaha-force-smax-suspension": "FORCE1.0/SMAX避震懸吊",
            "yamaha-force-smax-appearance": "FORCE1.0/SMAX熱門外觀燈系",
            "yamaha-force2": "YAMAHA FORCE2.0",
            "yamaha-force2-power": "FORCE2.0動力系統",
            "yamaha-force2-brake": "FORCE2.0煞車制動",
            "yamaha-force2-suspension": "FORCE2.0避震懸吊",
            "yamaha-force2-appearance": "FORCE2.0熱門外觀燈系",
            // KYMCO


            "kymco-krv": "KYMCO KRV",
            "kymco-krv-power": "KRV動力系統",
            "kymco-krv-brake": "KRV煞車制動",
            "kymco-krv-suspension": "KRV避震懸吊",
            "kymco-krv-appearance": "KRV熱門外觀燈系"
        };

        // 基本產品資料庫 (簡化版，與 products.html 相同的結構)
        const mockProductsDB = {
            // JET Series
            "jet-z2-fork": { 
                id: "jet-z2-fork", 
                name: "【怪獸工廠Z2 PRO前叉】", 
                price: 18800, 
                image: "images/parts/怪獸工廠Z2 PRO前叉.webp", 
                category: "sym-jet-suspension", 
                mainCategory: "sym-jet", 
                brand: "怪獸工廠", 
                dateAdded: "2024-05-01",
                shortDescription: "怪獸工廠Z2 PRO前叉，專為JET系列設計，提供卓越的操控性和舒適度。"
            },
            "jet-simota-mirror": { 
                id: "jet-simota-mirror", 
                name: "【SIMOTA碳纖維後照鏡】", 
                price: 8000, 
                image: "images/parts/SIMOTA碳纖維後照鏡.webp", 
                category: "sym-jet-appearance", 
                mainCategory: "sym-jet", 
                brand: "SIMOTA", 
                dateAdded: "2024-04-20",
                shortDescription: "SIMOTA碳纖維後照鏡，輕量化設計，提升運動感和視野。"
            },
            "jet-masa-disk-fixed": { 
                id: "jet-masa-disk-fixed", 
                name: "【MASA固定碟盤-劃線版】", 
                price: 2188, 
                image: "images/parts/MASA固定碟盤-劃線版.webp", 
                category: "sym-jet-brake", 
                mainCategory: "sym-jet", 
                brand: "MASA", 
                dateAdded: "2024-04-25",
                shortDescription: "MASA固定碟盤劃線版，提供更佳的制動效能和熱散效果。"
            },
            "jet-koso-taillight": { 
                id: "jet-koso-taillight", 
                name: "【KOSO衝刺尾燈】", 
                price: 3600, 
                image: "images/parts/KOSO衝刺尾燈.webp", 
                category: "sym-jet-appearance", 
                mainCategory: "sym-jet", 
                brand: "KOSO", 
                dateAdded: "2023-12-25",
                shortDescription: "KOSO衝刺尾燈採用LED光源，流線型設計，提升安全性與美觀度。"
            },
            "jet-baphomet-fuel-cap": { 
                id: "jet-baphomet-fuel-cap", 
                name: "【巴風特油箱蓋】", 
                price: 1300, 
                image: "images/parts/巴風特油箱蓋.webp", 
                category: "sym-jet-appearance", 
                mainCategory: "sym-jet", 
                brand: "巴風特", 
                dateAdded: "2024-04-11",
                shortDescription: "巴風特油箱蓋，CNC精密加工，時尚外觀設計，直接替換原廠件。"
            },
            "jet-gjms-tcd2000": { 
                id: "jet-gjms-tcd2000", 
                name: "【GJMS TCD2000前叉】", 
                price: 9000, 
                image: "images/parts/GJMS TCD2000前叉.webp", 
                category: "sym-jet-suspension", 
                mainCategory: "sym-jet", 
                brand: "GJMS", 
                dateAdded: "2024-03-15",
                shortDescription: "GJMS TCD2000前叉，全可調設計，提供更精準的懸吊表現。"
            },
            "jet-apexx-gt-exhaust-cover": { 
                id: "jet-apexx-gt-exhaust-cover", 
                name: "【APEXX GT防燙蓋】JET車系通用款", 
                price: 980, 
                image: "images/parts/APEXX GT防燙蓋.webp", 
                category: "sym-jet-appearance", 
                mainCategory: "sym-jet", 
                brand: "APEXX", 
                dateAdded: "2024-01-20",
                shortDescription: "APEXX GT防燙蓋，有效隔熱防燙，碳纖維材質，質輕美觀。"
            },
            // DRG系列
            "drg-ohlins-rear-shock": { 
                id: "drg-ohlins-rear-shock", 
                name: "【Öhlins DRG後避震】瑞典頂級避震器", 
                price: 32000, 
                image: "images/parts/drg-shock-ohlins.jpg", 
                category: "sym-drg-suspension", 
                mainCategory: "sym-drg", 
                brand: "Öhlins", 
                dateAdded: "2024-04-15",
                shortDescription: "Öhlins DRG後避震，瑞典頂級品質，全可調設計，提供極致操控體驗。"
            },
            "drg-star-lord-m7-taillight": {
                id: "drg-star-lord-m7-taillight", 
                name: "【星爵M7尾燈】DRG車系", 
                price: 4500, 
                image: "images/parts/星爵M7尾燈.webp", 
                category: "sym-drg-appearance", 
                mainCategory: "sym-drg", 
                brand: "星爵", 
                dateAdded: "2024-06-08",
                shortDescription: "星爵M7尾燈，LED光源，順序式方向燈設計，提升夜間行車安全性。"
            },
            "drg-aj-taillight": {
                id: "drg-aj-taillight", 
                name: "【AJ尾燈】DRG車系", 
                price: 4000, 
                image: "images/parts/AJ尾燈.webp", 
                category: "sym-drg-appearance", 
                mainCategory: "sym-drg", 
                brand: "AJ", 
                dateAdded: "2024-06-09",
                shortDescription: "AJ尾燈，流線型設計，LED光源，提供更好的視覺效果和安全性。"
            },
            "drg-anc72-caliper": {
                id: "drg-anc72-caliper", 
                name: "【ANC72大對四卡鉗】DRG車系", 
                price: 6000, 
                image: "images/parts/ANC72大對四卡鉗.webp", 
                category: "sym-drg-brake", 
                mainCategory: "sym-drg", 
                brand: "ANC", 
                dateAdded: "2024-06-10",
                shortDescription: "ANC72大對四卡鉗，CNC鋁合金製造，提供更強大的制動力。"
            },
            "drg-ccd-c53-fork": {
                id: "drg-ccd-c53-fork", 
                name: "【CCD C53前叉】DRG車系", 
                price: 17000, 
                image: "images/parts/CCD C53前叉.webp", 
                category: "sym-drg-suspension", 
                mainCategory: "sym-drg", 
                brand: "CCD", 
                dateAdded: "2024-06-07",
                shortDescription: "CCD C53前叉，全可調設計，提供卓越的操控性和舒適度。"
            },
            // MMBCU系列
            "mmbcu-brembo-caliper": { 
                id: "mmbcu-brembo-caliper", 
                name: "【Brembo MMBCU對四卡鉗】基本對四系列", 
                price: 7800, 
                image: "images/parts/mmbcu-caliper-brembo.jpg", 
                category: "sym-mmbcu-brake", 
                mainCategory: "sym-mmbcu", 
                brand: "Brembo", 
                dateAdded: "2024-03-01",
                shortDescription: "Brembo對四卡鉗，義大利品質，提供優異的制動力及煞車手感。"
            },
            "mmbcu-savage-bull-arx-fork": {
                id: "mmbcu-savage-bull-arx-fork", 
                name: "【野蠻公牛ARX經典版預載可調前叉】MMBCU車系", 
                price: 12000, 
                image: "images/parts/野蠻公牛ARX經典版預載可調前叉.webp", 
                category: "sym-mmbcu-suspension", 
                mainCategory: "sym-mmbcu", 
                brand: "野蠻公牛", 
                dateAdded: "2024-06-11",
                shortDescription: "野蠻公牛ARX前叉，預載可調，提供卓越的操控性。"
            },
            // 勁戰系列
            "cygnus-yss-rear-shock": { 
                id: "cygnus-yss-rear-shock", 
                name: "YSS G-Series 勁戰後避震 (雙槍)", 
                price: 8500, 
                image: "images/parts/cygnus-yss-shock.jpg", 
                category: "yamaha-cygnus-suspension", 
                mainCategory: "yamaha-cygnus", 
                brand: "YSS", 
                dateAdded: "2024-01-15",
                shortDescription: "YSS G-Series雙槍後避震，泰國頂級品牌，提供穩定操控感受。"
            },
            // FORCE系列
            "force-smax-malossi-variator": { 
                id: "force-smax-malossi-variator", 
                name: "【Malossi傳動前組】FORCE/SMAX專用", 
                price: 5500, 
                image: "images/parts/placeholder-product.png", 
                category: "yamaha-force-smax-power", 
                mainCategory: "yamaha-force-smax", 
                brand: "Malossi", 
                dateAdded: "2024-03-12",
                shortDescription: "Malossi傳動前組，義大利品質，提升加速性能及耐用度。"
            },
            // KRV系列
            "krv-nws-svr-exhaust": {
                id: "krv-nws-svr-exhaust", 
                name: "【牛王SVR排氣管】KRV車系", 
                price: 15000, 
                image: "images/parts/牛王SVR排氣管.webp", 
                category: "kymco-krv-power", 
                mainCategory: "kymco-krv", 
                brand: "牛王", 
                dateAdded: "2024-06-16",
                shortDescription: "牛王SVR排氣管，手工焊接工藝，提供渾厚聲浪和優異動力表現。"
            },
            // 從擎翔車業網站添加新產品
            "baphomet-exhaust-bracket": { 
                id: "baphomet-exhaust-bracket", 
                name: "【巴風特排氣管吊架】", 
                price: 2200, 
                image: "images/parts/placeholder-product.png", 
                category: "sym-jet-appearance", 
                mainCategory: "sym-jet", 
                brand: "巴風特", 
                dateAdded: "2024-06-20",
                shortDescription: "巴風特排氣管吊架，穩固支撐排氣管，減少震動，提升排氣效能。"
            },
            "koso-chest-cover": { 
                id: "koso-chest-cover", 
                name: "【KOSO導風胸蓋】", 
                price: 1600, 
                image: "images/parts/placeholder-product.png", 
                category: "sym-jet-appearance", 
                mainCategory: "sym-jet", 
                brand: "KOSO", 
                dateAdded: "2024-06-19",
                shortDescription: "KOSO導風胸蓋，改善空氣動力學，提升高速行駛穩定性。"
            },
            "koso-dragon-turn-signal": { 
                id: "koso-dragon-turn-signal", 
                name: "【KOSO龍紋序列式方向燈】", 
                price: 6500, 
                image: "images/parts/placeholder-product.png", 
                category: "sym-jet-appearance", 
                mainCategory: "sym-jet", 
                brand: "KOSO", 
                dateAdded: "2024-06-18",
                shortDescription: "KOSO龍紋序列式方向燈，獨特設計，提升辨識度和安全性。"
            },
            "skuny-headlight-armor": { 
                id: "skuny-headlight-armor", 
                name: "【SKUNY大燈護甲】", 
                price: 990, 
                image: "images/parts/placeholder-product.png", 
                category: "sym-jet-appearance", 
                mainCategory: "sym-jet", 
                brand: "SKUNY", 
                dateAdded: "2024-06-17",
                shortDescription: "SKUNY大燈護甲，保護前大燈不受損壞，同時提升車頭造型。"
            },
            "masa-floating-disc": { 
                id: "masa-floating-disc", 
                name: "【MASA浮動碟盤】", 
                price: 2888, 
                image: "images/parts/placeholder-product.png", 
                category: "sym-jet-brake", 
                mainCategory: "sym-jet", 
                brand: "MASA", 
                dateAdded: "2024-06-16",
                shortDescription: "MASA浮動碟盤，提供更佳的散熱效果和制動力，減少熱衰減現象。"
            },
            "ghost-factory-radiator-cover": { 
                id: "ghost-factory-radiator-cover", 
                name: "【Ghost Factory 水箱罩】", 
                price: 1380, 
                image: "images/parts/placeholder-product.png", 
                category: "sym-jet-appearance", 
                mainCategory: "sym-jet", 
                brand: "Ghost Factory", 
                dateAdded: "2024-06-15",
                shortDescription: "Ghost Factory水箱罩，保護水箱不受碎石損傷，同時提升前端造型。"
            },
            "ld2-taillight": { 
                id: "ld2-taillight", 
                name: "【亮點LD2尾燈】", 
                price: 3800, 
                image: "images/parts/placeholder-product.png", 
                category: "sym-jet-appearance", 
                mainCategory: "sym-jet", 
                brand: "亮點", 
                dateAdded: "2024-06-14",
                shortDescription: "亮點LD2尾燈，LED光源，提供更佳的視覺效果和夜間行車安全性。"
            },
            "koso-dragon-taillight": { 
                id: "koso-dragon-taillight", 
                name: "【KOSO龍紋尾燈】", 
                price: 6500, 
                image: "images/parts/placeholder-product.png", 
                category: "sym-jet-appearance", 
                mainCategory: "sym-jet", 
                brand: "KOSO", 
                dateAdded: "2024-06-13",
                shortDescription: "KOSO龍紋尾燈，獨特龍紋設計，LED光源，提升車尾視覺效果。"
            },
            "gowork-short-license-bracket": { 
                id: "gowork-short-license-bracket", 
                name: "【GOWORK短牌架】", 
                price: 3300, 
                image: "images/parts/placeholder-product.png", 
                category: "sym-jet-appearance", 
                mainCategory: "sym-jet", 
                brand: "GOWORK", 
                dateAdded: "2024-06-12",
                shortDescription: "GOWORK短牌架，簡潔設計，縮短車尾視覺長度，提升車輛運動感。"
            },
            "jstc-license-relocator": { 
                id: "jstc-license-relocator", 
                name: "【JSTC車牌上移】", 
                price: 2480, 
                image: "images/parts/placeholder-product.png", 
                category: "sym-jet-appearance", 
                mainCategory: "sym-jet", 
                brand: "JSTC", 
                dateAdded: "2024-06-11",
                shortDescription: "JSTC車牌上移套件，重新定位車牌位置，露出尾燈，提升整體美觀。"
            },
            "jstc-flame-inner-fender": { 
                id: "jstc-flame-inner-fender", 
                name: "【JSTC赤焰內土除】", 
                price: 4200, 
                image: "images/parts/placeholder-product.png", 
                category: "sym-jet-appearance", 
                mainCategory: "sym-jet", 
                brand: "JSTC", 
                dateAdded: "2024-06-10",
                shortDescription: "JSTC赤焰內土除，特殊設計，提升後輪視覺效果，同時提供防水防污功能。"
            },
            "limit-fuel-cap": { 
                id: "limit-fuel-cap", 
                name: "【LIMIT日規油箱蓋】", 
                price: 700, 
                image: "images/parts/placeholder-product.png", 
                category: "sym-jet-appearance", 
                mainCategory: "sym-jet", 
                brand: "LIMIT", 
                dateAdded: "2024-06-09",
                shortDescription: "LIMIT日規油箱蓋，日本風格設計，CNC加工，提升加油便利性。"
            },
            "monster-factory-zr-shock": { 
                id: "monster-factory-zr-shock", 
                name: "【怪獸工廠ZR後避震】", 
                price: 12800, 
                image: "images/parts/placeholder-product.png", 
                category: "sym-jet-suspension", 
                mainCategory: "sym-jet", 
                brand: "怪獸工廠", 
                dateAdded: "2024-06-08",
                shortDescription: "怪獸工廠ZR後避震，全可調設計，提供卓越的操控性和舒適度。"
            },
            "ajmb-aero-kit": { 
                id: "ajmb-aero-kit", 
                name: "【AJMB空力套件】", 
                price: 4200, 
                image: "images/parts/placeholder-product.png", 
                category: "sym-jet-appearance", 
                mainCategory: "sym-jet", 
                brand: "AJMB", 
                dateAdded: "2024-06-07",
                shortDescription: "AJMB空力套件，改善空氣動力學性能，減少風阻，提升高速穩定性。"
            },
            "reys-coolant-cap": { 
                id: "reys-coolant-cap", 
                name: "【REYS水箱注入蓋】", 
                price: 580, 
                image: "images/parts/placeholder-product.png", 
                category: "sym-jet-appearance", 
                mainCategory: "sym-jet", 
                brand: "REYS", 
                dateAdded: "2024-06-06",
                shortDescription: "REYS水箱注入蓋，CNC精密加工，提升水箱散熱效率。"
            }
        };

        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const productId = urlParams.get('id');

            // 首先查找詳細產品資料庫，如果沒有，則使用基本產品資料庫
            let product = mockProductDetailDB[productId];
            if (!product) {
                // 使用基本產品資料作為後備
                product = mockProductsDB[productId];
                // 添加預設的描述
                product.shortDescription = "此商品的詳細資訊尚在更新中，請參考基本資訊。";
                product.fullDescription = "<p>此商品的詳細資訊尚在更新中。</p><p>您可以參考下方的基本規格資訊，或聯繫我們獲取更多資訊。</p>";
                product.specifications = {
                    "適用車種": product.mainCategory ? categoryDisplayNames[product.mainCategory] || "請參考商品名稱" : "請參考商品名稱",
                    "品牌": product.brand || "未指定",
                    "更新日期": product.dateAdded || "未指定"
                };
            }
            const productDetailContent = document.getElementById('product-detail-content');
            const productAdditionalContent = document.getElementById('product-additional-content');
            const productNotFoundDiv = document.getElementById('product-not-found');

            if (product) {
                productDetailContent.style.display = ''; // Or original display value like 'grid'
                productAdditionalContent.style.display = '';
                productNotFoundDiv.style.display = 'none';

                document.title = `${product.name} - MotoWeb`;

                // Populate breadcrumbs
                const breadcrumbContainer = document.getElementById('breadcrumb-container');
                breadcrumbContainer.innerHTML = `
                    <li><a href="index.html">首頁</a></li>
                    <li><a href="products.html">改裝零件</a></li>
                    ${product.mainCategory && categoryDisplayNames[product.mainCategory] ? `<li><a href="products.html?category=${product.mainCategory}">${categoryDisplayNames[product.mainCategory]}</a></li>` : ''}
                    ${product.category && categoryDisplayNames[product.category] && product.category !== product.mainCategory ? `<li><a href="products.html?category=${product.category}">${categoryDisplayNames[product.category]}</a></li>` : ''}
                    <li>${product.name}</li>
                `;
                
                // 產品主圖 - 如果是預設圖片但有mainCategory車系資訊，則嘗試使用車款圖片
                let productImage = product.image || 'images/parts/placeholder-product.png';
                
                // 檢查是否為預設圖片，提供更好的後備策略
                if (productImage === 'images/parts/placeholder-product.png' && product.mainCategory) {
                    let bikeModel = '';
                    
                    if (product.mainCategory.includes('jet')) {
                        bikeModel = 'JET';
                    } else if (product.mainCategory.includes('drg')) {
                        bikeModel = 'DRG';
                    } else if (product.mainCategory.includes('mmbcu')) {
                        bikeModel = 'MMBCU';
                    } else if (product.mainCategory.includes('force2')) {
                        bikeModel = 'FORCE';
                    } else if (product.mainCategory.includes('force-smax')) {
                        bikeModel = 'FORCE';
                    } else if (product.mainCategory.includes('cygnus')) {
                        bikeModel = 'CYGNUS GRYPHUS';
                    } else if (product.mainCategory.includes('krv')) {
                        bikeModel = 'KRV';
                    } else if (product.mainCategory.includes('racings')) {
                        bikeModel = 'JET';
                    } else if (product.mainCategory.includes('augur')) {
                        bikeModel = 'AUGUR';
                    }
                    
                    // 如果有對應的車款圖片，則使用該圖片
                    if (bikeModel) {
                        productImage = `images/bikes/${bikeModel}.jpg`;
                        console.log(`使用車款圖片作為產品圖片：${productImage}`);
                    }
                }
                
                document.getElementById('product-image').src = productImage;
                document.getElementById('product-image').alt = product.name;
                document.getElementById('product-name').textContent = product.name;
                document.getElementById('product-brand').textContent = product.brand || 'N/A';
                if(product.brand) {
                    // Assuming brand link goes to a filtered product page by brand (not implemented yet)
                    document.getElementById('product-brand-link').href = `products.html?brand=${encodeURIComponent(product.brand)}`;
                }
                document.getElementById('product-price').textContent = `NT$${product.price.toLocaleString()}`;
                
                const shortDescEl = document.getElementById('product-short-description');
                if (product.shortDescription) {
                    shortDescEl.innerHTML = product.shortDescription; // Allow basic HTML if any
                } else {
                    shortDescEl.innerHTML = '<p>此產品暫無簡短描述。</p>';
                }

                const fullDescEl = document.getElementById('product-full-description');
                if (product.fullDescription) {
                    fullDescEl.innerHTML = product.fullDescription; // Allow HTML for rich text
                } else {
                    // 生成一個基本的詳細描述，基於簡短描述和產品名稱
                    let generatedDesc = '';
                    if(product.shortDescription) {
                        generatedDesc += `<p>${product.shortDescription}</p>`;
                    }
                    
                    // 根據產品類別生成適當的描述
                    if(product.category) {
                        if(product.category.includes('power')) {
                            generatedDesc += `<p>此產品設計用於提升車輛的動力性能，適用於 ${categoryDisplayNames[product.mainCategory] || '指定車款'}。</p>
                            <p>安裝後可以感受到車輛加速性能的提升，適合追求更好駕駛體驗的車主。安裝過程建議由專業技師進行。</p>`;
                        } else if(product.category.includes('brake')) {
                            generatedDesc += `<p>此制動系統升級配件能顯著提升煞車性能，適用於 ${categoryDisplayNames[product.mainCategory] || '指定車款'}。</p>
                            <p>安裝後可以感受到更直接的煞車反應和更短的煞車距離，提高行車安全性。建議同時更換煞車油以達到最佳效果。</p>`;
                        } else if(product.category.includes('suspension')) {
                            generatedDesc += `<p>此懸吊系統配件專為提升騎乘舒適度和操控性而設計，適用於 ${categoryDisplayNames[product.mainCategory] || '指定車款'}。</p>
                            <p>升級後可以明顯改善過彎穩定性與路面吸震效果，適合日常通勤和運動騎乘。產品經過嚴格測試以確保品質和耐用性。</p>`;
                        } else if(product.category.includes('appearance')) {
                            generatedDesc += `<p>此外觀改裝配件不僅提升車輛的視覺效果，更具備實用功能，適用於 ${categoryDisplayNames[product.mainCategory] || '指定車款'}。</p>
                            <p>採用高品質材料製作，耐候性良好，長時間使用不易褪色或老化。安裝簡便，可輕鬆替換原廠件。</p>`;
                        }
                    }
                    
                    fullDescEl.innerHTML = generatedDesc || '<p>此產品暫無詳細說明，請咨詢專業人員了解更多資訊。</p>';
                }

                const specsEl = document.getElementById('product-specifications').querySelector('ul');
                if (product.specifications && Object.keys(product.specifications).length > 0) {
                    specsEl.innerHTML = ''; // Clear loading message
                    for (const key in product.specifications) {
                        const listItem = document.createElement('li');
                        listItem.innerHTML = `<strong>${key}:</strong> ${product.specifications[key]}`;
                        specsEl.appendChild(listItem);
                    }
                } else {
                    // 生成基本規格信息
                    specsEl.innerHTML = '';
                    
                    // 添加基本規格
                    const baseSpecs = [
                        {key: "適用車種", value: categoryDisplayNames[product.mainCategory] || "請參考商品名稱"},
                        {key: "品牌", value: product.brand || "N/A"},
                        {key: "產品編號", value: product.id || "未指定"},
                        {key: "更新日期", value: product.dateAdded || "未指定"}
                    ];
                    
                    // 根據產品類別添加特定規格
                    if(product.category) {
                        if(product.category.includes('power')) {
                            baseSpecs.push({key: "安裝難度", value: "中等"});
                            baseSpecs.push({key: "預期效能提升", value: "視乎車況及其他配件"});
                        } else if(product.category.includes('brake')) {
                            baseSpecs.push({key: "煞車類型", value: "油壓碟煞"});
                            baseSpecs.push({key: "建議同時更換", value: "高級煞車油"});
                        } else if(product.category.includes('suspension')) {
                            baseSpecs.push({key: "可調選項", value: "視產品型號而定"});
                            baseSpecs.push({key: "建議保養週期", value: "每10,000公里"});
                        } else if(product.category.includes('appearance')) {
                            baseSpecs.push({key: "材質", value: "高級工程塑料/鋁合金/碳纖維(視產品而定)"});
                            baseSpecs.push({key: "安裝方式", value: "直接替換/螺絲固定"});
                        }
                    }
                    
                    // 添加到規格列表
                    baseSpecs.forEach(spec => {
                        const listItem = document.createElement('li');
                        listItem.innerHTML = `<strong>${spec.key}:</strong> ${spec.value}`;
                        specsEl.appendChild(listItem);
                    });
                }

                const addToCartBtn = document.getElementById('add-to-cart-btn');
                addToCartBtn.addEventListener('click', () => {
                    // Placeholder for add to cart functionality
                    const quantity = document.getElementById('quantity').value;
                    alert(`已將 ${quantity} 件 "${product.name}" 加入購物車 (模擬功能)`);
                    // Here you would typically interact with a cart system
                });

            } else {
                document.title = "找不到產品 - MotoWeb";
                productDetailContent.style.display = 'none';
                productAdditionalContent.style.display = 'none';
                productNotFoundDiv.style.display = 'block';
                 // Clear breadcrumbs or set a "Not Found" breadcrumb
                const breadcrumbContainer = document.getElementById('breadcrumb-container');
                breadcrumbContainer.innerHTML = `
                    <li><a href="index.html">首頁</a></li>
                    <li><a href="products.html">改裝零件</a></li>
                    <li>找不到產品</li>
                `;
            }

            if (typeof initMobileNav === 'function') initMobileNav();
            if (typeof initAuthState === 'function') initAuthState();
        });
    </script>
</body>
</html> 
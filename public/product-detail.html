<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Details - MotoWeb</title>
    <meta name="description" content="Detailed specifications, pricing, and purchase information for motorcycle modification parts">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/tech-theme.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        /* Enhanced Product detail page - Modern tech theme */
        body {
            background: var(--secondary-color);
            margin-top: 80px;
        }

        .product-detail-main {
            max-width: 1400px;
            margin: 2rem auto;
            padding: 0 1rem;
        }

        .breadcrumb {
            list-style: none;
            padding: 1rem 2rem;
            margin-bottom: 2rem;
            background: linear-gradient(145deg, var(--mid-surface), var(--dark-surface));
            border-radius: 15px;
            border: 1px solid var(--carbon-gray);
            box-shadow: 
                0 8px 25px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .breadcrumb li {
            display: inline;
            font-size: 1rem;
            color: var(--metallic-silver);
            font-weight: 500;
        }

        .breadcrumb li a {
            color: var(--primary-color);
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .breadcrumb li a:hover {
            color: var(--success-color);
            text-shadow: 0 0 10px rgba(0, 255, 136, 0.3);
        }

        .breadcrumb li::after {
            content: '>';
            margin: 0 1rem;
            color: var(--carbon-gray);
        }

        .breadcrumb li:last-child {
            color: white;
            font-weight: 600;
        }

        .breadcrumb li:last-child::after {
            content: '';
        }

        .product-detail-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4rem;
            background: linear-gradient(145deg, var(--mid-surface), var(--dark-surface));
            padding: 3rem;
            border-radius: 25px;
            box-shadow: 
                0 20px 60px rgba(0, 0, 0, 0.6),
                0 0 40px rgba(0, 212, 255, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            border: 2px solid var(--primary-color);
            position: relative;
            overflow: hidden;
        }

        .product-detail-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, 
                var(--primary-color), 
                var(--accent-color), 
                var(--success-color));
        }

        .product-image-section {
            position: relative;
        }

        .main-image-container {
            position: relative;
            margin-bottom: 1.5rem;
        }

        .product-image-section .main-image {
            width: 100%;
            height: 400px;
            border-radius: 20px;
            border: 2px solid var(--carbon-gray);
            object-fit: cover;
            box-shadow: 
                0 15px 50px rgba(0, 0, 0, 0.5),
                0 0 30px rgba(0, 212, 255, 0.2);
            transition: all 0.3s ease;
            cursor: zoom-in;
        }

        .product-image-section .main-image:hover {
            border-color: var(--primary-color);
            box-shadow: 
                0 20px 60px rgba(0, 0, 0, 0.6),
                0 0 40px rgba(0, 212, 255, 0.4);
            transform: scale(1.02);
        }

        .image-gallery {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .gallery-thumb {
            width: 80px;
            height: 80px;
            border-radius: 12px;
            border: 2px solid var(--carbon-gray);
            object-fit: cover;
            cursor: pointer;
            transition: all 0.3s ease;
            opacity: 0.7;
        }

        .gallery-thumb:hover,
        .gallery-thumb.active {
            border-color: var(--primary-color);
            opacity: 1;
            transform: scale(1.1);
            box-shadow: 0 8px 25px rgba(0, 212, 255, 0.3);
        }

        .zoom-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10000;
        }

        .zoom-overlay img {
            max-width: 90%;
            max-height: 90%;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8);
        }

        .zoom-close {
            position: absolute;
            top: 2rem;
            right: 2rem;
            background: var(--primary-color);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .zoom-close:hover {
            background: var(--accent-color);
            transform: scale(1.1);
        }

        .product-info-section .product-title {
            font-size: 2.8rem;
            font-weight: 700;
            color: white;
            margin-bottom: 1rem;
            background: linear-gradient(45deg, 
                white, 
                var(--primary-color), 
                var(--accent-color));
            background-size: 300% 300%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: neonGlow 4s ease-in-out infinite;
            text-shadow: 0 0 20px rgba(0, 212, 255, 0.3);
            line-height: 1.2;
        }

        .product-info-section .product-brand {
            font-size: 1.3rem;
            color: var(--metallic-silver);
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }
        
        .product-info-section .product-brand a {
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            padding: 0.3rem 0.8rem;
            border-radius: 8px;
            border: 1px solid var(--primary-color);
        }

        .product-info-section .product-brand a:hover {
            color: var(--success-color);
            border-color: var(--success-color);
            text-shadow: 0 0 10px rgba(0, 255, 136, 0.3);
            background: rgba(0, 255, 136, 0.1);
        }

        .product-info-section .product-price {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--success-color);
            margin-bottom: 2rem;
            text-shadow: 0 0 20px rgba(0, 255, 136, 0.5);
            animation: cyberpulse 3s infinite;
            display: flex;
            align-items: center;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .price-badge {
            background: linear-gradient(45deg, var(--success-color), var(--primary-color));
            padding: 0.5rem 1rem;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: white;
        }

        .product-info-section .product-short-description {
            font-size: 1.2rem;
            line-height: 1.8;
            margin-bottom: 2.5rem;
            color: var(--metallic-silver);
            background: linear-gradient(145deg, var(--dark-surface), var(--mid-surface));
            padding: 2rem;
            border-radius: 15px;
            border: 1px solid var(--carbon-gray);
            box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.1);
            position: relative;
        }

        .product-short-description::before {
            content: 'ğŸ’¡';
            position: absolute;
            top: 1rem;
            right: 1rem;
            font-size: 1.5rem;
        }

        .product-actions {
            background: linear-gradient(145deg, var(--dark-surface), var(--mid-surface));
            padding: 2.5rem;
            border-radius: 20px;
            border: 1px solid var(--carbon-gray);
            box-shadow: 
                inset 0 1px 0 rgba(255, 255, 255, 0.1),
                0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .product-actions .quantity-selector {
            margin-bottom: 2rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .product-actions label {
            font-weight: 600;
            color: white;
            font-size: 1.1rem;
            min-width: 80px;
        }

        .product-actions input[type="number"] {
            background: var(--dark-surface);
            border: 2px solid var(--carbon-gray);
            color: white;
            padding: 0.8rem;
            border-radius: 10px;
            font-size: 1.1rem;
            width: 80px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .product-actions input[type="number"]:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 15px rgba(0, 212, 255, 0.3);
            outline: none;
        }

        .add-to-cart-btn {
            width: 100%;
            background: linear-gradient(45deg, var(--primary-color), var(--accent-color));
            color: white;
            border: none;
            padding: 1.2rem 2rem;
            border-radius: 15px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 8px 25px rgba(0, 212, 255, 0.3);
        }

        .add-to-cart-btn:hover {
            background: linear-gradient(45deg, var(--accent-color), var(--success-color));
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(0, 212, 255, 0.5);
        }

        .add-to-cart-btn:active {
            transform: translateY(-1px);
        }

        .product-additional-details {
            margin-top: 3rem;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 3rem;
        }

        .product-description,
        .product-specs {
            background: linear-gradient(145deg, var(--mid-surface), var(--dark-surface));
            padding: 2.5rem;
            border-radius: 20px;
            border: 1px solid var(--carbon-gray);
            box-shadow: 
                0 15px 40px rgba(0, 0, 0, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .product-description h3,
        .product-specs h3 {
            color: var(--primary-color);
            margin-bottom: 1.5rem;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }

        .description-content,
        .specs-content {
            color: var(--metallic-silver);
            line-height: 1.8;
        }

        .specs-content ul {
            list-style: none;
            padding: 0;
        }

        .specs-content li {
            padding: 0.8rem 0;
            border-bottom: 1px solid var(--carbon-gray);
            display: flex;
            justify-content: space-between;
        }

        .specs-content li:last-child {
            border-bottom: none;
        }

        .specs-content li strong {
            color: var(--primary-color);
            font-weight: 600;
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .product-detail-container {
                grid-template-columns: 1fr;
                gap: 2rem;
                padding: 2rem;
            }

            .product-additional-details {
                grid-template-columns: 1fr;
                gap: 2rem;
            }

            .product-info-section .product-title {
                font-size: 2.2rem;
            }

            .product-info-section .product-price {
                font-size: 2rem;
                flex-direction: column;
                align-items: flex-start;
            }

            .breadcrumb {
                padding: 1rem;
            }

            .product-detail-main {
                padding: 0 1rem;
            }

            .main-image {
                height: 300px !important;
            }
        }

        /* Animations */
        @keyframes neonGlow {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        @keyframes cyberpulse {
            0%, 100% { text-shadow: 0 0 20px rgba(0, 255, 136, 0.5); }
            50% { text-shadow: 0 0 30px rgba(0, 255, 136, 0.8), 0 0 40px rgba(0, 255, 136, 0.3); }
        }

        /* Product not found styling */
        #product-not-found {
            text-align: center;
            padding: 4rem 2rem;
            background: linear-gradient(145deg, var(--mid-surface), var(--dark-surface));
            border-radius: 20px;
            border: 1px solid var(--carbon-gray);
            color: var(--metallic-silver);
        }

        #product-not-found h2 {
            color: var(--accent-color);
            margin-bottom: 1rem;
            font-size: 2rem;
        }

        #product-not-found a {
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 600;
        }

        #product-not-found a:hover {
            color: var(--success-color);
            text-shadow: 0 0 10px rgba(0, 255, 136, 0.3);
        }

        /* Enhanced Back Button */
        .back-button-container {
            position: fixed;
            top: 100px;
            left: 2rem;
            z-index: 1000;
        }

        .back-button {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            background: linear-gradient(145deg, var(--primary-color), var(--accent-color));
            color: white;
            border: none;
            padding: 1rem 1.5rem;
            border-radius: 50px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 
                0 8px 25px rgba(0, 212, 255, 0.3),
                0 4px 15px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }

        .back-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 255, 255, 0.2), 
                transparent);
            transition: left 0.5s ease;
        }

        .back-button:hover::before {
            left: 100%;
        }

        .back-button:hover {
            background: linear-gradient(145deg, var(--accent-color), var(--success-color));
            transform: translateY(-2px) scale(1.05);
            box-shadow: 
                0 12px 35px rgba(0, 212, 255, 0.4),
                0 6px 20px rgba(0, 0, 0, 0.3);
        }

        .back-button:active {
            transform: translateY(-1px) scale(1.02);
        }

        .back-button i {
            font-size: 1.1rem;
            transition: transform 0.3s ease;
        }

        .back-button:hover i {
            transform: translateX(-3px);
        }

        .back-text {
            font-weight: 600;
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }

        /* Responsive back button */
        @media (max-width: 768px) {
            .back-button-container {
                top: 90px;
                left: 1rem;
            }

            .back-button {
                padding: 0.8rem 1.2rem;
                font-size: 0.9rem;
                gap: 0.6rem;
            }

            .back-text {
                display: none;
            }

            .back-button {
                width: 50px;
                height: 50px;
                border-radius: 50%;
                justify-content: center;
                padding: 0;
            }
        }

        /* Animation for back button entrance */
        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .back-button-container {
            animation: slideInLeft 0.6s ease-out;
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="container nav-container">
            <div class="logo">
                <a href="index.html" aria-label="MotoWeb Home">
                    <img src="/images/motoweb-logo.svg" alt="MotoWeb Logo" class="logo-img">
                    <h1>MotoWeb</h1>
                </a>
            </div>
            <div class="nav-links" id="navLinks">
                <div class="main-nav">
                    <a href="index.html">Home</a>
                    <a href="products.html" class="active" aria-current="page">Products</a>
                    <a href="community.html">Community</a>
                    <a href="gallery.html">Gallery</a>
                    <a href="events.html">Events</a>
                    <a href="about.html">About Us</a>
                </div>
                <div class="auth-buttons">
                    <a href="login.html" class="btn btn-secondary">Login</a>
                    <a href="register.html" class="btn btn-primary">Register</a>
                </div>
                <div class="user-menu" style="display: none;">
                    <div class="user-avatar">
                        <img src="/images/default-avatar.svg" alt="User Avatar" class="avatar">
                        <span class="username">Username</span>
                    </div>
                    <div class="dropdown-menu">
                        <a href="/profile.html"><i class="fas fa-user"></i> Profile</a>
                        <a href="/garage.html"><i class="fas fa-motorcycle"></i> My Garage</a>
                        <a href="/settings.html"><i class="fas fa-cog"></i> Settings</a>
                        <a href="#" id="logout"><i class="fas fa-sign-out-alt"></i> Logout</a>
                    </div>
                </div>
            </div>
            <button class="menu-toggle" aria-label="Toggle Menu" aria-expanded="false" aria-controls="navLinks">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </button>
        </div>
    </nav>

    <!-- Back button -->
    <div class="back-button-container">
        <button class="back-button" onclick="history.back()" aria-label="Go Back">
            <i class="fas fa-arrow-left"></i>
            <span class="back-text">Back</span>
        </button>
    </div>

    <main class="product-detail-main">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb" id="breadcrumb-container">
                <!-- Breadcrumbs will be populated by JavaScript -->
            </ol>
        </nav>

        <div id="product-not-found" style="display:none; text-align:center; padding: 2rem;">
            <h2><i class="fas fa-exclamation-triangle"></i> Product Not Found</h2>
            <p>Sorry, we couldn't find the product you're looking for. Return to <a href="products.html">Products List</a>.</p>
        </div>

        <section class="product-detail-container" id="product-detail-content">
            <div class="product-image-section">
                <div class="main-image-container">
                    <img id="product-image" class="main-image" src="/images/parts/placeholder-product.png" alt="Product Image">
                </div>
                <div class="image-gallery" id="image-gallery">
                    <!-- Gallery thumbnails will be populated by JavaScript -->
                </div>
            </div>

            <div class="product-info-section">
                <h1 id="product-name" class="product-title">Loading product...</h1>
                <p class="product-brand">Brand: <a href="#" id="product-brand-link"><span id="product-brand">N/A</span></a></p>
                <div class="product-price">
                    <span id="product-price">NT$0</span>
                    <span class="price-badge">Best Price</span>
                </div>
                
                <div id="product-short-description" class="product-short-description">
                    <p>No product description available</p>
                </div>

                <div class="product-actions">
                    <div class="quantity-selector">
                        <label for="quantity">Quantity:</label>
                        <input type="number" id="quantity" name="quantity" value="1" min="1" max="99">
                    </div>
                    <button id="add-to-cart-btn" class="add-to-cart-btn">
                        <i class="fas fa-shopping-cart"></i> Add to Cart
                    </button>
                </div>
            </div>
        </section>

        <section class="product-additional-details" id="product-additional-content">
            <div class="product-description">
                <h3><i class="fas fa-file-alt"></i> Product Details</h3>
                <div id="product-full-description" class="description-content">
                    <p>No detailed description available</p>
                </div>
            </div>
            <div class="product-specs">
                <h3><i class="fas fa-list-ul"></i> Specifications</h3>
                <div id="product-specifications" class="specs-content">
                    <ul>
                        <li><strong>Specifications:</strong> Loading...</li>
                    </ul>
                </div>
            </div>
        </section>
    </main>

    <!-- Image zoom overlay -->
    <div class="zoom-overlay" id="zoom-overlay">
        <button class="zoom-close" id="zoom-close">&times;</button>
        <img id="zoom-image" src="" alt="Zoomed Product Image">
    </div>

    <footer class="footer">
        <!-- Footer content will be inserted by common.js -->
    </footer>

    <script src="/js/common.js"></script>
    <script src="/js/auth-state.js"></script>
    <script>
        // Mock product data (This should ideally be in a shared file or fetched from a backend)
        // Updated to match server.js productsDatabase exactly
        const mockProductDetailDB = {
            "jet-z2-pro-fork": { 
                id: "jet-z2-pro-fork", 
                name: "æ€ªç¸å·¥å» Z2 PROå‰å‰", 
                price: 18800, 
                image: "images/parts/æ€ªç¸å·¥å» ZRå¾Œé¿éœ‡2.webp", 
                images: [
                    "images/parts/æ€ªç¸å·¥å» ZRå¾Œé¿éœ‡2.webp"
                ],
                category: "suspension", 
                mainCategory: "sym-jet", 
                brand: "æ€ªç¸å·¥å» ", 
                dateAdded: "2024-05-01",
                shortDescription: "å°ˆç‚ºJETç³»åˆ—è¨­è¨ˆçš„é«˜æ€§èƒ½Z2 PROå‰æ‡¸åŠï¼Œæä¾›å“è¶Šçš„æ“æ§æ€§å’Œèˆ’é©æ€§",
                fullDescription: "<p>æ€ªç¸å·¥å» æœ€æ–°çš„Z2 PROé¿éœ‡å™¨æ¡ç”¨ç²¾å¯†CNCåŠ å·¥å’Œå¢å¼·é˜»å°¼è¨­å®šï¼Œèƒ½æœ‰æ•ˆå¸æ”¶è·¯é¢è¡æ“Šï¼Œæå‡é¨ä¹˜ç©©å®šæ€§ã€‚ç„¡è«–æ˜¯è³½é“ç«¶æŠ€æˆ–å±±è·¯å·¡èˆªï¼Œéƒ½èƒ½å¸¶ä¾†æ¥µè‡´çš„é¨ä¹˜é«”é©—ã€‚</p><p><strong>ç‰¹è‰²åŠŸèƒ½ï¼š</strong><br>â€¢ å¯å®¢è£½åŒ–è¨­å®š<br>â€¢ é˜»å°¼å¯èª¿<br>â€¢ è¼•é‡åŒ–è€ç”¨è¨­è¨ˆ</p>",
                specifications: { "é©ç”¨è»Šå‹": "SYM JETç³»åˆ—", "æè³ª": "èˆªå¤ªç´šé‹åˆé‡‘", "ä¿å›º": "ä¸€å¹´åŸå» ä¿å›º", "èª¿æ•´åŠŸèƒ½": "é è¼‰å¯èª¿ã€é˜»å°¼å¯èª¿" }
            },
            "baphomet-exhaust-bracket": { 
                id: "baphomet-exhaust-bracket", 
                name: "å·´é¢¨ç‰¹æ’æ°£ç®¡åŠæ¶", 
                price: 2200, 
                image: "images/parts/ç‰›ç‹SVRæ’æ°£ç®¡.webp", 
                images: [
                    "images/parts/ç‰›ç‹SVRæ’æ°£ç®¡.webp"
                ],
                category: "exhaust", 
                mainCategory: "sym-jet", 
                brand: "å·´é¢¨ç‰¹", 
                dateAdded: "2024-06-20",
                shortDescription: "å·´é¢¨ç‰¹æ’æ°£ç®¡åŠæ¶ï¼Œæä¾›æ›´ç©©å›ºçš„æ”¯æ’å’Œå„ªè³ªéŸ³æ•ˆ",
                fullDescription: "<p>å·´é¢¨ç‰¹æ’æ°£ç®¡åŠæ¶æ¡ç”¨é«˜å“è³ªææ–™è£½é€ ï¼Œä¸åƒ…æä¾›ç©©å›ºçš„æ”¯æ’ï¼Œæ›´èƒ½å„ªåŒ–æ’æ°£éŸ³æ•ˆã€‚é©åˆå„ç¨®é¨ä¹˜å ´åˆä½¿ç”¨ã€‚</p>",
                specifications: { "é©ç”¨è»Šå‹": "SYM JETç³»åˆ—", "æè³ª": "é«˜å“è³ªä¸é½é‹¼", "é‡é‡": "0.5kg" }
            },
            "simota-carbon-mirror": { 
                id: "simota-carbon-mirror", 
                name: "SIMOTAç¢³çº–ç¶­å¾Œç…§é¡", 
                price: 8000, 
                image: "images/parts/mirrors.svg", 
                images: [
                    "images/parts/mirrors.svg"
                ],
                category: "appearance", 
                mainCategory: "sym-jet", 
                brand: "SIMOTA", 
                dateAdded: "2024-04-15",
                shortDescription: "SIMOTAç¢³çº–ç¶­å¾Œç…§é¡ï¼Œè¼•é‡åŒ–è¨­è¨ˆæå‡è¦–è¦ºè³ªæ„Ÿ",
                fullDescription: "<p>SIMOTAç¢³çº–ç¶­å¾Œç…§é¡æ¡ç”¨çœŸç¢³çº–ç¶­æè³ªï¼Œä¸åƒ…é‡é‡è¼•ï¼Œæ›´å…·å‚™å„ªç•°çš„è¦–è¦ºæ•ˆæœã€‚ç¬¦åˆæ³•è¦æ¨™æº–ï¼Œæä¾›æ¸…æ™°çš„å¾Œæ–¹è¦–é‡ã€‚</p>",
                specifications: { "é©ç”¨è»Šå‹": "SYM JET/DRGç³»åˆ—", "æè³ª": "çœŸç¢³çº–ç¶­", "é‡é‡": "200g/å°", "èªè­‰": "DOTèªè­‰" }
            },
            "masa-floating-disc": { 
                id: "masa-floating-disc", 
                name: "MASAæµ®å‹•ç¢Ÿç›¤", 
                price: 2888, 
                image: "images/parts/FARé»‘é‡‘ç¢Ÿç›¤.webp", 
                images: [
                    "images/parts/FARé»‘é‡‘ç¢Ÿç›¤.webp",
                    "images/parts/FARé»‘é‡‘ç¢Ÿç›¤2.webp"
                ],
                category: "brakes", 
                mainCategory: "sym-jet", 
                brand: "MASA", 
                dateAdded: "2024-03-10",
                shortDescription: "MASAæµ®å‹•ç¢Ÿç›¤ï¼Œæå‡åˆ¶å‹•æ•ˆèƒ½å’Œæ•£ç†±æ€§èƒ½",
                fullDescription: "<p>MASAæµ®å‹•ç¢Ÿç›¤æ¡ç”¨æµ®å‹•å¼è¨­è¨ˆï¼Œèƒ½æœ‰æ•ˆæ¸›å°‘ç†±è®Šå½¢ï¼Œæå‡åˆ¶å‹•ç©©å®šæ€§ã€‚é«˜å“è³ªé‹¼æè£½é€ ï¼Œè€ç”¨æ€§ä½³ã€‚</p>",
                specifications: { "é©ç”¨è»Šå‹": "SYM JETç³»åˆ—", "æè³ª": "é«˜ç¢³é‹¼", "ç›´å¾‘": "260mm", "åšåº¦": "4mm" }
            },
            "koso-chest-cover": { 
                id: "koso-chest-cover", 
                name: "KOSOå°é¢¨èƒ¸è“‹", 
                price: 1600, 
                image: "images/parts/KOSOå°é¢¨èƒ¸è“‹.webp", 
                images: [
                    "images/parts/KOSOå°é¢¨èƒ¸è“‹.webp",
                    "images/parts/KOSOå°é¢¨èƒ¸è“‹2.webp",
                    "images/parts/KOSOå°é¢¨èƒ¸è“‹3.webp"
                ],
                category: "appearance", 
                mainCategory: "sym-jet", 
                brand: "KOSO", 
                dateAdded: "2024-02-28",
                shortDescription: "KOSOå°é¢¨èƒ¸è“‹ï¼Œå„ªåŒ–æ°£æµä¸¦æå‡å¤–è§€è³ªæ„Ÿ",
                fullDescription: "<p>KOSOå°é¢¨èƒ¸è“‹è¨­è¨ˆç²¾è‰¯ï¼Œä¸åƒ…èƒ½å„ªåŒ–å¼•æ“æ•£ç†±æ°£æµï¼Œæ›´æå‡æ•´é«”å¤–è§€è³ªæ„Ÿã€‚å®‰è£ç°¡æ˜“ï¼Œå“è³ªå¯é ã€‚</p>",
                specifications: { "é©ç”¨è»Šå‹": "SYM JETç³»åˆ—", "æè³ª": "é«˜å“è³ªABSå¡‘æ–™", "åŠŸèƒ½": "å°é¢¨æ•£ç†±" }
            },
            "koso-dragon-turn-signal": { 
                id: "koso-dragon-turn-signal", 
                name: "KOSOé¾ç´‹åºåˆ—å¼æ–¹å‘ç‡ˆ", 
                price: 6500, 
                image: "images/parts/KOSOé¾ç´‹åºåˆ—å¼æ–¹å‘ç‡ˆ.webp", 
                images: [
                    "images/parts/KOSOé¾ç´‹åºåˆ—å¼æ–¹å‘ç‡ˆ.webp",
                    "images/parts/KOSOé¾ç´‹åºåˆ—å¼æ–¹å‘ç‡ˆ2.webp",
                    "images/parts/KOSOé¾ç´‹åºåˆ—å¼æ–¹å‘ç‡ˆ3.webp"
                ],
                category: "electronics", 
                mainCategory: "sym-jet", 
                brand: "KOSO", 
                dateAdded: "2024-06-18",
                shortDescription: "KOSOé¾ç´‹åºåˆ—å¼æ–¹å‘ç‡ˆï¼Œæ™‚å°šLEDè¨­è¨ˆæå‡å®‰å…¨æ€§",
                fullDescription: "<p>KOSOé¾ç´‹åºåˆ—å¼æ–¹å‘ç‡ˆæ¡ç”¨LEDåºåˆ—å¼è¨­è¨ˆï¼Œä¸åƒ…å¤–è§€æ™‚å°šï¼Œæ›´èƒ½æå‡å¤œé–“é¨ä¹˜å®‰å…¨æ€§ã€‚é€šéè»Šå®‰èªè­‰ã€‚</p><p><strong>ç‰¹è‰²åŠŸèƒ½ï¼š</strong><br>â€¢ åºåˆ—å¼LEDå‹•ç•«<br>â€¢ é¾ç´‹åœ–æ¡ˆè¨­è¨ˆ<br>â€¢ æå‡èƒ½è¦‹åº¦<br>â€¢ ç°¡æ˜“å®‰è£<br>â€¢ é«˜å“è³ªææ–™</p>",
                specifications: { 
                    "é©ç”¨è»Šå‹": "SYM JETç³»åˆ—ã€YAMAHA FORCEç³»åˆ—", 
                    "ç‡ˆæº": "LED",
                    "åŠŸç‡": "12V",
                    "èªè­‰": "è»Šå®‰èªè­‰"
                }
            },
            "skuny-headlight-armor": { 
                id: "skuny-headlight-armor", 
                name: "SKUNYå¤§ç‡ˆè­·ç”²", 
                price: 990, 
                image: "images/parts/REYSæ°´ç®±è­·ç½©.webp", 
                images: [
                    "images/parts/REYSæ°´ç®±è­·ç½©.webp",
                    "images/parts/REYSæ°´ç®±è­·ç½©2.webp",
                    "images/parts/REYSæ°´ç®±è­·ç½©3.webp"
                ],
                category: "appearance", 
                mainCategory: "sym-jet", 
                brand: "SKUNY", 
                dateAdded: "2024-06-17",
                shortDescription: "SKUNYå¤§ç‡ˆè­·ç”²ï¼Œä¿è­·å¤§ç‡ˆå…å—æå‚·",
                fullDescription: "<p>SKUNYå¤§ç‡ˆè­·ç”²æ¡ç”¨é«˜éŸŒæ€§ææ–™è£½é€ ï¼Œèƒ½æœ‰æ•ˆä¿è­·å¤§ç‡ˆå…å—ç¢çŸ³æ’æ“Šã€‚é€æ˜è¨­è¨ˆä¸å½±éŸ¿ç…§æ˜æ•ˆæœã€‚</p>",
                specifications: { "é©ç”¨è»Šå‹": "SYM JETç³»åˆ—", "æè³ª": "é«˜éŸŒæ€§èšç¢³é…¸é…¯", "é€å…‰ç‡": "95%ä»¥ä¸Š" }
            },
            "apexx-gt-heat-shield": { 
                id: "apexx-gt-heat-shield", 
                name: "APEXX GTé˜²ç‡™è“‹", 
                price: 980, 
                image: "images/parts/APEXXåªšçœ¼.webp", 
                images: [
                    "images/parts/APEXXåªšçœ¼.webp",
                    "images/parts/APEXXåªšçœ¼2.webp",
                    "images/parts/APEXXåªšçœ¼3.webp"
                ],
                category: "exhaust", 
                mainCategory: "sym-jet", 
                brand: "APEXX", 
                dateAdded: "2024-01-20",
                shortDescription: "APEXX GTç³»åˆ—æ’æ°£é˜²ç‡™è“‹ï¼Œæœ‰æ•ˆé™ä½ç‡™å‚·é¢¨éšª",
                fullDescription: "<p>APEXX GTç³»åˆ—é˜²ç‡™è“‹æ¡ç”¨è€é«˜æº«ææ–™è£½é€ ï¼Œæœ‰æ•ˆé™ä½æ’æ°£ç®¡ç‡™å‚·é¢¨éšªã€‚é€ å‹ç¾è§€ï¼Œå®‰è£ç°¡æ˜“ã€‚</p>",
                specifications: { "é©ç”¨è»Šå‹": "SYM JETç³»åˆ—", "æè³ª": "è€é«˜æº«å¡‘æ–™", "è€æº«": "200Â°C" }
            },
            // YAMAHA BWSç³»åˆ—
            "bws-power-kit": { 
                id: "bws-power-kit", 
                name: "BWSå‹•åŠ›ç³»çµ±å‡ç´šå¥—ä»¶", 
                price: 15800, 
                image: "images/parts/ARACER SPORTD.webp", 
                images: [
                    "images/parts/ARACER SPORTD.webp",
                    "images/parts/ARACER SPORTD2.webp",
                    "images/parts/ARACER SPORTD3.webp",
                    "images/parts/ARACER SPORTD4.webp"
                ],
                category: "engine", 
                mainCategory: "yamaha-bws", 
                brand: "ARACER", 
                dateAdded: "2024-06-01",
                shortDescription: "BWSå°ˆç”¨å‹•åŠ›å‡ç´šå¥—ä»¶ï¼Œæå‡é¦¬åŠ›å’Œæ‰­åŠ›è¼¸å‡º",
                fullDescription: "<p>ARACERç‚ºBWSç³»åˆ—é–‹ç™¼çš„å°ˆç”¨å‹•åŠ›å¥—ä»¶ï¼ŒåŒ…å«ECUèª¿æ ¡ã€é€²æ°£ç³»çµ±å„ªåŒ–ç­‰ï¼Œèƒ½æœ‰æ•ˆæå‡15-20%å‹•åŠ›è¼¸å‡ºã€‚</p>",
                specifications: { 
                    "é©ç”¨è»Šå‹": "YAMAHA BWSç³»åˆ—", 
                    "é¦¬åŠ›æå‡": "15-20%", 
                    "æ‰­åŠ›æå‡": "10-15%", 
                    "ä¿å›º": "å…­å€‹æœˆ" 
                }
            },
            // KYMCOç³»åˆ—
            "racing-thunder-power-kit": { 
                id: "racing-thunder-power-kit", 
                name: "é›·éœ†å‹•åŠ›ç³»çµ±å‡ç´š", 
                price: 16500, 
                image: "images/parts/ARACER SPORTD.webp", 
                images: [
                    "images/parts/ARACER SPORTD.webp",
                    "images/parts/ARACER SPORTD2.webp",
                    "images/parts/ARACER SPORTD3.webp",
                    "images/parts/ARACER SPORTD4.webp"
                ],
                category: "engine", 
                mainCategory: "kymco-racing", 
                brand: "ARACER", 
                dateAdded: "2024-04-20",
                shortDescription: "é›·éœ†å°ˆç”¨å‹•åŠ›å‡ç´šï¼Œé‡‹æ”¾å¼•æ“æ½›èƒ½",
                fullDescription: "<p>ARACERå°ˆç‚ºé›·éœ†ç³»åˆ—é–‹ç™¼çš„å‹•åŠ›å‡ç´šå¥—ä»¶ï¼Œé€éECUé‡æ–°èª¿æ ¡å’Œé€²æ°£ç³»çµ±å„ªåŒ–ï¼Œå¤§å¹…æå‡å‹•åŠ›è¡¨ç¾ã€‚</p>",
                specifications: { 
                    "é©ç”¨è»Šå‹": "KYMCOé›·éœ†125/150", 
                    "é¦¬åŠ›æå‡": "18-25%", 
                    "æ‰­åŠ›æå‡": "12-18%", 
                    "æ²¹è€—æ”¹å–„": "5-8%" 
                }
            },
            // KYMCO KRVç³»åˆ—
            "krv-power-upgrade": { 
                id: "krv-power-upgrade", 
                name: "KRVå‹•åŠ›å‡ç´šå¥—ä»¶", 
                price: 17200, 
                image: "images/parts/ARACER SPORTD.webp", 
                images: [
                    "images/parts/ARACER SPORTD.webp",
                    "images/parts/ARACER SPORTD2.webp",
                    "images/parts/ARACER SPORTD3.webp",
                    "images/parts/ARACER SPORTD4.webp"
                ],
                category: "engine", 
                mainCategory: "kymco-krv", 
                brand: "ARACER", 
                dateAdded: "2024-06-15",
                shortDescription: "KRVå°ˆç”¨å‹•åŠ›å‡ç´šå¥—ä»¶ï¼Œæå‡æ•´é«”æ€§èƒ½è¡¨ç¾",
                fullDescription: "<p>ARACERç‚ºKRVç³»åˆ—é–‹ç™¼çš„å°ˆç”¨å‹•åŠ›å¥—ä»¶ï¼Œé€éECUèª¿æ ¡å’Œé€²æ°£ç³»çµ±å„ªåŒ–ï¼Œé¡¯è‘—æå‡å‹•åŠ›è¼¸å‡ºã€‚</p>",
                specifications: { 
                    "é©ç”¨è»Šå‹": "KYMCO KRV 180", 
                    "é¦¬åŠ›æå‡": "20-25%", 
                    "æ‰­åŠ›æå‡": "15-20%", 
                    "ä¿å›º": "å…­å€‹æœˆ" 
                }
            },
            // SYM é»‘æ›¼å·´MMBCUç³»åˆ—
            "mmbcu-suspension-kit": { 
                id: "mmbcu-suspension-kit", 
                name: "é»‘æ›¼å·´é¿éœ‡å‡ç´šå¥—ä»¶", 
                price: 22800, 
                image: "images/parts/é‡è »å…¬ç‰›ARXç¶“å…¸ç‰ˆé è¼‰å¯èª¿å‰å‰.webp", 
                images: [
                    "images/parts/é‡è »å…¬ç‰›ARXç¶“å…¸ç‰ˆé è¼‰å¯èª¿å‰å‰.webp",
                    "images/parts/é‡è »å…¬ç‰›ARXç¶“å…¸ç‰ˆé è¼‰å¯èª¿å‰å‰2.webp",
                    "images/parts/é‡è »å…¬ç‰›ARXç¶“å…¸ç‰ˆé è¼‰å¯èª¿å‰å‰3.webp",
                    "images/parts/é‡è »å…¬ç‰›ARXç¶“å…¸ç‰ˆé è¼‰å¯èª¿å‰å‰4.webp",
                    "images/parts/é‡è »å…¬ç‰›ARXç¶“å…¸ç‰ˆé è¼‰å¯èª¿å‰å‰5.webp"
                ],
                category: "suspension", 
                mainCategory: "sym-mmbcu", 
                brand: "æ€ªç¸å·¥å» ", 
                dateAdded: "2024-06-10",
                shortDescription: "é»‘æ›¼å·´å°ˆç”¨é¿éœ‡å¥—ä»¶ï¼Œæ¥µè‡´æ“æ§é«”é©—",
                fullDescription: "<p>æ€ªç¸å·¥å» ç‚ºé»‘æ›¼å·´MMBCUé‡èº«æ‰“é€ çš„é«˜æ€§èƒ½é¿éœ‡å¥—ä»¶ï¼Œæä¾›è³½é“ç´šçš„æ“æ§è¡¨ç¾ã€‚</p>",
                specifications: { 
                    "é©ç”¨è»Šå‹": "SYM é»‘æ›¼å·´MMBCU 125", 
                    "æè³ª": "èˆªå¤ªç´šé‹åˆé‡‘", 
                    "èª¿æ•´åŠŸèƒ½": "é è¼‰/é˜»å°¼å¯èª¿" 
                }
            },
            // YAMAHA å‹æˆ°ç³»åˆ—
            "cygnus-exhaust-system": { 
                id: "cygnus-exhaust-system", 
                name: "å‹æˆ°ç«¶æŠ€æ’æ°£ç®¡", 
                price: 8800, 
                image: "images/parts/ç‰›ç‹SVRæ’æ°£ç®¡.webp", 
                images: [
                    "images/parts/ç‰›ç‹SVRæ’æ°£ç®¡.webp",
                    "images/parts/ç‰›ç‹SVRæ’æ°£ç®¡2.webp",
                    "images/parts/ç‰›ç‹SVRæ’æ°£ç®¡3.webp"
                ],
                category: "exhaust", 
                mainCategory: "yamaha-cygnus", 
                brand: "SKUNY", 
                dateAdded: "2024-05-20",
                shortDescription: "å‹æˆ°å°ˆç”¨ç«¶æŠ€æ’æ°£ç®¡ï¼Œæå‡å‹•åŠ›èˆ‡éŸ³æ•ˆ",
                fullDescription: "<p>SKUNYç‚ºå‹æˆ°ç³»åˆ—è¨­è¨ˆçš„ç«¶æŠ€æ’æ°£ç®¡ï¼Œä¸åƒ…æå‡å‹•åŠ›è¼¸å‡ºï¼Œæ›´å¸¶ä¾†è¿·äººçš„æ’æ°£éŸ³æ•ˆã€‚</p>",
                specifications: { 
                    "é©ç”¨è»Šå‹": "YAMAHA å‹æˆ°125/150", 
                    "æè³ª": "ä¸é½é‹¼", 
                    "é‡é‡": "2.8kg", 
                    "éŸ³é‡": "95dB" 
                }
            },
            // AUGURç³»åˆ—
            "augur-brake-upgrade": { 
                id: "augur-brake-upgrade", 
                name: "AUGURç…è»Šå‡ç´šå¥—ä»¶", 
                price: 12500, 
                image: "images/parts/ANC72å¤§å°å››å¡é‰—.webp", 
                images: [
                    "images/parts/ANC72å¤§å°å››å¡é‰—.webp",
                    "images/parts/ANC72å¤§å°å››å¡é‰—2.webp",
                    "images/parts/ANC72å¤§å°å››å¡é‰—3.webp"
                ],
                category: "brakes", 
                mainCategory: "augur", 
                brand: "MASA", 
                dateAdded: "2024-04-25",
                shortDescription: "AUGURå°ˆç”¨ç…è»Šå‡ç´šå¥—ä»¶ï¼Œæ¥µè‡´åˆ¶å‹•æ€§èƒ½",
                fullDescription: "<p>MASAç‚ºAUGURç³»åˆ—é–‹ç™¼çš„å°ˆæ¥­ç…è»Šå¥—ä»¶ï¼Œæä¾›å“è¶Šçš„åˆ¶å‹•åŠ›å’Œæ•£ç†±æ•ˆæœã€‚</p>",
                specifications: { 
                    "é©ç”¨è»Šå‹": "AUGURç³»åˆ—", 
                    "æè³ª": "é«˜ç¢³é‹¼ç¢Ÿç›¤", 
                    "ä¾†ä»¤ç‰‡": "é«˜æ€§èƒ½è¤‡åˆææ–™" 
                }
            }
        };

        // Category display names
        const categoryDisplayNames = {
            "sym-jet": "SYM JET Series",
            "yamaha-bws": "YAMAHA BWS Series", 
            "yamaha-cygnus": "YAMAHA å‹æˆ°ç³»åˆ—",
            "kymco-racing": "KYMCOé›·éœ†ç³»åˆ—",
            "kymco-krv": "KYMCO KRVç³»åˆ—",
            "sym-mmbcu": "SYM é»‘æ›¼å·´MMBCUç³»åˆ—",
            "augur": "AUGURç³»åˆ—",
            "suspension": "é¿éœ‡æ‡¸åŠç³»çµ±",
            "exhaust": "æ’æ°£ç³»çµ±", 
            "appearance": "å¤–è§€æ”¹è£",
            "electronics": "é›»å­è¨­å‚™",
            "brakes": "ç…è»Šåˆ¶å‹•ç³»çµ±",
            "engine": "å¼•æ“å‹•åŠ›ç³»çµ±"
        };

        document.addEventListener('DOMContentLoaded', function() {
            const productDetailContent = document.getElementById('product-detail-content');
            const productAdditionalContent = document.getElementById('product-additional-content');
            const productNotFoundDiv = document.getElementById('product-not-found');
            
            const urlParams = new URLSearchParams(window.location.search);
            const productId = urlParams.get('id');
            const product = mockProductDetailDB[productId] || mockProductsDB[productId];
            
            if (product) {
                // é¡¯ç¤ºç”¢å“è©³æƒ…
                productDetailContent.style.display = '';
                productAdditionalContent.style.display = '';
                productNotFoundDiv.style.display = 'none';
                
                // æ›´æ–°é é¢æ¨™é¡Œå’Œå…§å®¹
                document.title = `${product.name} - MotoWeb`;
                
                // æ›´æ–°ç”¢å“è³‡è¨Š
                updateProductDisplay(product);
                
                // åˆå§‹åŒ–åœ–ç‰‡ç•«å»Š
                initImageGallery(product);
                
                // åˆå§‹åŒ–åœ–ç‰‡ç¸®æ”¾åŠŸèƒ½
                initImageZoom();
            } else {
                // é¡¯ç¤ºæœªæ‰¾åˆ°ç”¢å“
                document.title = "Product Not Found - MotoWeb";
                productDetailContent.style.display = 'none';
                productAdditionalContent.style.display = 'none';
                productNotFoundDiv.style.display = 'block';
                
                const breadcrumbContainer = document.getElementById('breadcrumb-container');
                if (breadcrumbContainer) {
                    breadcrumbContainer.innerHTML = [
                        '<li><a href="index.html">Home</a></li>',
                        '<li><a href="products.html">Products</a></li>',
                        '<li>Product Not Found</li>'
                    ].join('');
                }
            }
            
            // åˆå§‹åŒ–å…¶ä»–åŠŸèƒ½
            if (typeof initMobileNav === 'function') initMobileNav();
            if (typeof initAuthState === 'function') initAuthState();
        });
        
        function updateProductDisplay(product) {
            // Update product image
            const productImage = document.getElementById('product-image');
            if (productImage) {
                productImage.src = product.image || 'images/parts/placeholder-product.png';
                productImage.alt = product.name;
            }
            
            // Update product name
            const productName = document.getElementById('product-name');
            if (productName) {
                productName.textContent = product.name;
            }
            
            // Update brand information
            const productBrand = document.getElementById('product-brand');
            const productBrandLink = document.getElementById('product-brand-link');
            if (productBrand) {
                productBrand.textContent = product.brand || 'N/A';
            }
            if (productBrandLink && product.brand) {
                productBrandLink.href = `products.html?brand=${encodeURIComponent(product.brand)}`;
            }
            
            // Update price
            const productPrice = document.getElementById('product-price');
            if (productPrice) {
                productPrice.textContent = `NT$${product.price.toLocaleString()}`;
            }
            
            // Update descriptions
            const shortDesc = document.getElementById('product-short-description');
            if (shortDesc) {
                shortDesc.innerHTML = product.shortDescription || '<p>No product description available</p>';
            }
            
            const fullDesc = document.getElementById('product-full-description');
            if (fullDesc) {
                fullDesc.innerHTML = product.fullDescription || '<p>No detailed description available</p>';
            }
            
            // Update specifications
            const specs = document.getElementById('product-specifications');
            if (specs) {
                const specsList = specs.querySelector('ul');
                if (specsList && product.specifications) {
                    specsList.innerHTML = Object.entries(product.specifications)
                        .map(([key, value]) => `<li><strong>${key}:</strong> ${value}</li>`)
                        .join('');
                }
            }
            
            // Setup shopping cart button
            const addToCartBtn = document.getElementById('add-to-cart-btn');
            if (addToCartBtn) {
                addToCartBtn.onclick = function() {
                    const quantity = document.getElementById('quantity').value;
                    
                    // Add visual feedback
                    addToCartBtn.innerHTML = '<i class="fas fa-check"></i> Added!';
                    addToCartBtn.style.background = 'linear-gradient(45deg, var(--success-color), var(--success-color))';
                    
                    setTimeout(() => {
                        addToCartBtn.innerHTML = '<i class="fas fa-shopping-cart"></i> Add to Cart';
                        addToCartBtn.style.background = 'linear-gradient(45deg, var(--primary-color), var(--accent-color))';
                    }, 2000);
                    
                    alert(`Added ${quantity} x "${product.name}" to cart successfully!`);
                };
            }
            
            // Update breadcrumbs
            const breadcrumbContainer = document.getElementById('breadcrumb-container');
            if (breadcrumbContainer) {
                const breadcrumbs = ['<li><a href="index.html">Home</a></li>'];
                breadcrumbs.push('<li><a href="products.html">Products</a></li>');
                
                if (product.mainCategory && categoryDisplayNames[product.mainCategory]) {
                    breadcrumbs.push(`<li><a href="products.html?category=${product.mainCategory}">${categoryDisplayNames[product.mainCategory]}</a></li>`);
                }
                
                if (product.category && categoryDisplayNames[product.category] && product.category !== product.mainCategory) {
                    breadcrumbs.push(`<li><a href="products.html?category=${product.category}">${categoryDisplayNames[product.category]}</a></li>`);
                }
                
                breadcrumbs.push(`<li>${product.name}</li>`);
                breadcrumbContainer.innerHTML = breadcrumbs.join('');
            }
        }

        function initImageGallery(product) {
            const gallery = document.getElementById('image-gallery');
            const mainImage = document.getElementById('product-image');
            
            if (product.images && product.images.length > 1 && gallery) {
                gallery.innerHTML = '';
                product.images.forEach((imageSrc, index) => {
                    const thumb = document.createElement('img');
                    thumb.src = imageSrc;
                    thumb.alt = `${product.name} - Image ${index + 1}`;
                    thumb.className = 'gallery-thumb' + (index === 0 ? ' active' : '');
                    thumb.onclick = () => {
                        mainImage.src = imageSrc;
                        document.querySelectorAll('.gallery-thumb').forEach(t => t.classList.remove('active'));
                        thumb.classList.add('active');
                    };
                    gallery.appendChild(thumb);
                });
            }
        }

        function initImageZoom() {
            const mainImage = document.getElementById('product-image');
            const zoomOverlay = document.getElementById('zoom-overlay');
            const zoomImage = document.getElementById('zoom-image');
            const zoomClose = document.getElementById('zoom-close');
            
            mainImage.onclick = () => {
                zoomImage.src = mainImage.src;
                zoomOverlay.style.display = 'flex';
                document.body.style.overflow = 'hidden';
            };
            
            zoomClose.onclick = closeZoom;
            zoomOverlay.onclick = (e) => {
                if (e.target === zoomOverlay) closeZoom();
            };
            
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') closeZoom();
            });
            
            function closeZoom() {
                zoomOverlay.style.display = 'none';
                document.body.style.overflow = 'auto';
            }
        }
    </script>
</body>
</html> 

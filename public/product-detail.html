<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Details - MotoWeb</title>
    <meta name="description" content="Detailed specifications, pricing, and purchase information for motorcycle modification parts">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/tech-theme.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        /* Enhanced Product detail page - Modern tech theme */
        body {
            background: var(--secondary-color);
            margin-top: 80px;
        }

        .product-detail-main {
            max-width: 1400px;
            margin: 2rem auto;
            padding: 0 1rem;
        }

        .breadcrumb {
            list-style: none;
            padding: 1rem 2rem;
            margin-bottom: 2rem;
            background: linear-gradient(145deg, var(--mid-surface), var(--dark-surface));
            border-radius: 15px;
            border: 1px solid var(--carbon-gray);
            box-shadow: 
                0 8px 25px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .breadcrumb li {
            display: inline;
            font-size: 1rem;
            color: var(--metallic-silver);
            font-weight: 500;
        }

        .breadcrumb li a {
            color: var(--primary-color);
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .breadcrumb li a:hover {
            color: var(--success-color);
            text-shadow: 0 0 10px rgba(0, 255, 136, 0.3);
        }

        .breadcrumb li::after {
            content: '>';
            margin: 0 1rem;
            color: var(--carbon-gray);
        }

        .breadcrumb li:last-child {
            color: white;
            font-weight: 600;
        }

        .breadcrumb li:last-child::after {
            content: '';
        }

        .product-detail-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4rem;
            background: linear-gradient(145deg, var(--mid-surface), var(--dark-surface));
            padding: 3rem;
            border-radius: 25px;
            box-shadow: 
                0 20px 60px rgba(0, 0, 0, 0.6),
                0 0 40px rgba(0, 212, 255, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            border: 2px solid var(--primary-color);
            position: relative;
            overflow: hidden;
        }

        .product-detail-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, 
                var(--primary-color), 
                var(--accent-color), 
                var(--success-color));
        }

        .product-image-section {
            position: relative;
        }

        .main-image-container {
            position: relative;
            margin-bottom: 1.5rem;
        }

        .product-image-section .main-image {
            width: 100%;
            height: 400px;
            border-radius: 20px;
            border: 2px solid var(--carbon-gray);
            object-fit: cover;
            box-shadow: 
                0 15px 50px rgba(0, 0, 0, 0.5),
                0 0 30px rgba(0, 212, 255, 0.2);
            transition: all 0.3s ease;
            cursor: zoom-in;
        }

        .product-image-section .main-image:hover {
            border-color: var(--primary-color);
            box-shadow: 
                0 20px 60px rgba(0, 0, 0, 0.6),
                0 0 40px rgba(0, 212, 255, 0.4);
            transform: scale(1.02);
        }

        .image-gallery {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .gallery-thumb {
            width: 80px;
            height: 80px;
            border-radius: 12px;
            border: 2px solid var(--carbon-gray);
            object-fit: cover;
            cursor: pointer;
            transition: all 0.3s ease;
            opacity: 0.7;
        }

        .gallery-thumb:hover,
        .gallery-thumb.active {
            border-color: var(--primary-color);
            opacity: 1;
            transform: scale(1.1);
            box-shadow: 0 8px 25px rgba(0, 212, 255, 0.3);
        }

        .zoom-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10000;
        }

        .zoom-overlay img {
            max-width: 90%;
            max-height: 90%;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8);
        }

        .zoom-close {
            position: absolute;
            top: 2rem;
            right: 2rem;
            background: var(--primary-color);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .zoom-close:hover {
            background: var(--accent-color);
            transform: scale(1.1);
        }

        .product-info-section .product-title {
            font-size: 2.8rem;
            font-weight: 700;
            color: white;
            margin-bottom: 1rem;
            background: linear-gradient(45deg, 
                white, 
                var(--primary-color), 
                var(--accent-color));
            background-size: 300% 300%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: neonGlow 4s ease-in-out infinite;
            text-shadow: 0 0 20px rgba(0, 212, 255, 0.3);
            line-height: 1.2;
        }

        .product-info-section .product-brand {
            font-size: 1.3rem;
            color: var(--metallic-silver);
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }
        
        .product-info-section .product-brand a {
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            padding: 0.3rem 0.8rem;
            border-radius: 8px;
            border: 1px solid var(--primary-color);
        }

        .product-info-section .product-brand a:hover {
            color: var(--success-color);
            border-color: var(--success-color);
            text-shadow: 0 0 10px rgba(0, 255, 136, 0.3);
            background: rgba(0, 255, 136, 0.1);
        }

        .product-info-section .product-price {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--success-color);
            margin-bottom: 2rem;
            text-shadow: 0 0 20px rgba(0, 255, 136, 0.5);
            animation: cyberpulse 3s infinite;
            display: flex;
            align-items: center;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .price-badge {
            background: linear-gradient(45deg, var(--success-color), var(--primary-color));
            padding: 0.5rem 1rem;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: white;
        }

        .product-info-section .product-short-description {
            font-size: 1.2rem;
            line-height: 1.8;
            margin-bottom: 2.5rem;
            color: var(--metallic-silver);
            background: linear-gradient(145deg, var(--dark-surface), var(--mid-surface));
            padding: 2rem;
            border-radius: 15px;
            border: 1px solid var(--carbon-gray);
            box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.1);
            position: relative;
        }

        .product-short-description::before {
            content: '💡';
            position: absolute;
            top: 1rem;
            right: 1rem;
            font-size: 1.5rem;
        }

        .product-actions {
            background: linear-gradient(145deg, var(--dark-surface), var(--mid-surface));
            padding: 2.5rem;
            border-radius: 20px;
            border: 1px solid var(--carbon-gray);
            box-shadow: 
                inset 0 1px 0 rgba(255, 255, 255, 0.1),
                0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .product-actions .quantity-selector {
            margin-bottom: 2rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .product-actions label {
            font-weight: 600;
            color: white;
            font-size: 1.1rem;
            min-width: 80px;
        }

        .product-actions input[type="number"] {
            background: var(--dark-surface);
            border: 2px solid var(--carbon-gray);
            color: white;
            padding: 0.8rem;
            border-radius: 10px;
            font-size: 1.1rem;
            width: 80px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .product-actions input[type="number"]:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 15px rgba(0, 212, 255, 0.3);
            outline: none;
        }

        .add-to-cart-btn {
            width: 100%;
            background: linear-gradient(45deg, var(--primary-color), var(--accent-color));
            color: white;
            border: none;
            padding: 1.2rem 2rem;
            border-radius: 15px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 8px 25px rgba(0, 212, 255, 0.3);
        }

        .add-to-cart-btn:hover {
            background: linear-gradient(45deg, var(--accent-color), var(--success-color));
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(0, 212, 255, 0.5);
        }

        .add-to-cart-btn:active {
            transform: translateY(-1px);
        }

        .product-additional-details {
            margin-top: 3rem;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 3rem;
        }

        .product-description,
        .product-specs {
            background: linear-gradient(145deg, var(--mid-surface), var(--dark-surface));
            padding: 2.5rem;
            border-radius: 20px;
            border: 1px solid var(--carbon-gray);
            box-shadow: 
                0 15px 40px rgba(0, 0, 0, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .product-description h3,
        .product-specs h3 {
            color: var(--primary-color);
            margin-bottom: 1.5rem;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }

        .description-content,
        .specs-content {
            color: var(--metallic-silver);
            line-height: 1.8;
        }

        .specs-content ul {
            list-style: none;
            padding: 0;
        }

        .specs-content li {
            padding: 0.8rem 0;
            border-bottom: 1px solid var(--carbon-gray);
            display: flex;
            justify-content: space-between;
        }

        .specs-content li:last-child {
            border-bottom: none;
        }

        .specs-content li strong {
            color: var(--primary-color);
            font-weight: 600;
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .product-detail-container {
                grid-template-columns: 1fr;
                gap: 2rem;
                padding: 2rem;
            }

            .product-additional-details {
                grid-template-columns: 1fr;
                gap: 2rem;
            }

            .product-info-section .product-title {
                font-size: 2.2rem;
            }

            .product-info-section .product-price {
                font-size: 2rem;
                flex-direction: column;
                align-items: flex-start;
            }

            .breadcrumb {
                padding: 1rem;
            }

            .product-detail-main {
                padding: 0 1rem;
            }

            .main-image {
                height: 300px !important;
            }
        }

        /* Animations */
        @keyframes neonGlow {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        @keyframes cyberpulse {
            0%, 100% { text-shadow: 0 0 20px rgba(0, 255, 136, 0.5); }
            50% { text-shadow: 0 0 30px rgba(0, 255, 136, 0.8), 0 0 40px rgba(0, 255, 136, 0.3); }
        }

        /* Product not found styling */
        #product-not-found {
            text-align: center;
            padding: 4rem 2rem;
            background: linear-gradient(145deg, var(--mid-surface), var(--dark-surface));
            border-radius: 20px;
            border: 1px solid var(--carbon-gray);
            color: var(--metallic-silver);
        }

        #product-not-found h2 {
            color: var(--accent-color);
            margin-bottom: 1rem;
            font-size: 2rem;
        }

        #product-not-found a {
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 600;
        }

        #product-not-found a:hover {
            color: var(--success-color);
            text-shadow: 0 0 10px rgba(0, 255, 136, 0.3);
        }

        /* Enhanced Back Button */
        .back-button-container {
            position: fixed;
            top: 100px;
            left: 2rem;
            z-index: 1000;
        }

        .back-button {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            background: linear-gradient(145deg, var(--primary-color), var(--accent-color));
            color: white;
            border: none;
            padding: 1rem 1.5rem;
            border-radius: 50px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 
                0 8px 25px rgba(0, 212, 255, 0.3),
                0 4px 15px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }

        .back-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 255, 255, 0.2), 
                transparent);
            transition: left 0.5s ease;
        }

        .back-button:hover::before {
            left: 100%;
        }

        .back-button:hover {
            background: linear-gradient(145deg, var(--accent-color), var(--success-color));
            transform: translateY(-2px) scale(1.05);
            box-shadow: 
                0 12px 35px rgba(0, 212, 255, 0.4),
                0 6px 20px rgba(0, 0, 0, 0.3);
        }

        .back-button:active {
            transform: translateY(-1px) scale(1.02);
        }

        .back-button i {
            font-size: 1.1rem;
            transition: transform 0.3s ease;
        }

        .back-button:hover i {
            transform: translateX(-3px);
        }

        .back-text {
            font-weight: 600;
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }

        /* Responsive back button */
        @media (max-width: 768px) {
            .back-button-container {
                top: 90px;
                left: 1rem;
            }

            .back-button {
                padding: 0.8rem 1.2rem;
                font-size: 0.9rem;
                gap: 0.6rem;
            }

            .back-text {
                display: none;
            }

            .back-button {
                width: 50px;
                height: 50px;
                border-radius: 50%;
                justify-content: center;
                padding: 0;
            }
        }

        /* Animation for back button entrance */
        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .back-button-container {
            animation: slideInLeft 0.6s ease-out;
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="container nav-container">
            <div class="logo">
                <a href="index.html" aria-label="MotoWeb Home">
                    <img src="/images/motoweb-logo.svg" alt="MotoWeb Logo" class="logo-img">
                    <h1>MotoWeb</h1>
                </a>
            </div>
            <div class="nav-links" id="navLinks">
                <div class="main-nav">
                    <a href="index.html">Home</a>
                    <a href="products.html" class="active" aria-current="page">Products</a>
                    <a href="community.html">Community</a>
                    <a href="gallery.html">Gallery</a>
                    <a href="events.html">Events</a>
                    <a href="about.html">About Us</a>
                </div>
                <div class="auth-buttons">
                    <a href="login.html" class="btn btn-secondary">Login</a>
                    <a href="register.html" class="btn btn-primary">Register</a>
                </div>
                <div class="user-menu" style="display: none;">
                    <div class="user-avatar">
                        <img src="/images/default-avatar.svg" alt="User Avatar" class="avatar">
                        <span class="username">Username</span>
                    </div>
                    <div class="dropdown-menu">
                        <a href="/profile.html"><i class="fas fa-user"></i> Profile</a>
                        <a href="/garage.html"><i class="fas fa-motorcycle"></i> My Garage</a>
                        <a href="/settings.html"><i class="fas fa-cog"></i> Settings</a>
                        <a href="#" id="logout"><i class="fas fa-sign-out-alt"></i> Logout</a>
                    </div>
                </div>
            </div>
            <button class="menu-toggle" aria-label="Toggle Menu" aria-expanded="false" aria-controls="navLinks">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </button>
        </div>
    </nav>

    <!-- Back button -->
    <div class="back-button-container">
        <button class="back-button" onclick="history.back()" aria-label="Go Back">
            <i class="fas fa-arrow-left"></i>
            <span class="back-text">Back</span>
        </button>
    </div>

    <main class="product-detail-main">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb" id="breadcrumb-container">
                <!-- Breadcrumbs will be populated by JavaScript -->
            </ol>
        </nav>

        <div id="product-not-found" style="display:none; text-align:center; padding: 2rem;">
            <h2><i class="fas fa-exclamation-triangle"></i> Product Not Found</h2>
            <p>Sorry, we couldn't find the product you're looking for. Return to <a href="products.html">Products List</a>.</p>
        </div>

        <section class="product-detail-container" id="product-detail-content">
            <div class="product-image-section">
                <div class="main-image-container">
                    <img id="product-image" class="main-image" src="/images/parts/placeholder-product.png" alt="Product Image">
                </div>
                <div class="image-gallery" id="image-gallery">
                    <!-- Gallery thumbnails will be populated by JavaScript -->
                </div>
            </div>

            <div class="product-info-section">
                <h1 id="product-name" class="product-title">Loading product...</h1>
                <p class="product-brand">Brand: <a href="#" id="product-brand-link"><span id="product-brand">N/A</span></a></p>
                <div class="product-price">
                    <span id="product-price">NT$0</span>
                    <span class="price-badge">Best Price</span>
                </div>
                
                <div id="product-short-description" class="product-short-description">
                    <p>No product description available</p>
                </div>

                <div class="product-actions">
                    <div class="quantity-selector">
                        <label for="quantity">Quantity:</label>
                        <input type="number" id="quantity" name="quantity" value="1" min="1" max="99">
                    </div>
                    <button id="add-to-cart-btn" class="add-to-cart-btn">
                        <i class="fas fa-shopping-cart"></i> Add to Cart
                    </button>
                </div>
            </div>
        </section>

        <section class="product-additional-details" id="product-additional-content">
            <div class="product-description">
                <h3><i class="fas fa-file-alt"></i> Product Details</h3>
                <div id="product-full-description" class="description-content">
                    <p>No detailed description available</p>
                </div>
            </div>
            <div class="product-specs">
                <h3><i class="fas fa-list-ul"></i> Specifications</h3>
                <div id="product-specifications" class="specs-content">
                    <ul>
                        <li><strong>Specifications:</strong> Loading...</li>
                    </ul>
                </div>
            </div>
        </section>
    </main>

    <!-- Image zoom overlay -->
    <div class="zoom-overlay" id="zoom-overlay">
        <button class="zoom-close" id="zoom-close">&times;</button>
        <img id="zoom-image" src="" alt="Zoomed Product Image">
    </div>

    <footer class="footer">
        <!-- Footer content will be inserted by common.js -->
    </footer>

    <script src="/js/common.js"></script>
    <script src="/js/auth-state.js"></script>
    <script>
        // Mock product data (This should ideally be in a shared file or fetched from a backend)
        // Updated to match server.js productsDatabase exactly
        const mockProductDetailDB = {
            "jet-z2-pro-fork": { 
                id: "jet-z2-pro-fork", 
                name: "怪獸工廠Z2 PRO前叉", 
                price: 18800, 
                image: "images/parts/怪獸工廠ZR後避震2.webp", 
                images: [
                    "images/parts/怪獸工廠ZR後避震2.webp"
                ],
                category: "suspension", 
                mainCategory: "sym-jet", 
                brand: "怪獸工廠", 
                dateAdded: "2024-05-01",
                shortDescription: "專為JET系列設計的高性能Z2 PRO前懸吊，提供卓越的操控性和舒適性",
                fullDescription: "<p>怪獸工廠最新的Z2 PRO避震器採用精密CNC加工和增強阻尼設定，能有效吸收路面衝擊，提升騎乘穩定性。無論是賽道競技或山路巡航，都能帶來極致的騎乘體驗。</p><p><strong>特色功能：</strong><br>• 可客製化設定<br>• 阻尼可調<br>• 輕量化耐用設計</p>",
                specifications: { "適用車型": "SYM JET系列", "材質": "航太級鋁合金", "保固": "一年原廠保固", "調整功能": "預載可調、阻尼可調" }
            },
            "baphomet-exhaust-bracket": { 
                id: "baphomet-exhaust-bracket", 
                name: "巴風特排氣管吊架", 
                price: 2200, 
                image: "images/parts/牛王SVR排氣管.webp", 
                images: [
                    "images/parts/牛王SVR排氣管.webp"
                ],
                category: "exhaust", 
                mainCategory: "sym-jet", 
                brand: "巴風特", 
                dateAdded: "2024-06-20",
                shortDescription: "巴風特排氣管吊架，提供更穩固的支撐和優質音效",
                fullDescription: "<p>巴風特排氣管吊架採用高品質材料製造，不僅提供穩固的支撐，更能優化排氣音效。適合各種騎乘場合使用。</p>",
                specifications: { "適用車型": "SYM JET系列", "材質": "高品質不鏽鋼", "重量": "0.5kg" }
            },
            "simota-carbon-mirror": { 
                id: "simota-carbon-mirror", 
                name: "SIMOTA碳纖維後照鏡", 
                price: 8000, 
                image: "images/parts/mirrors.svg", 
                images: [
                    "images/parts/mirrors.svg"
                ],
                category: "appearance", 
                mainCategory: "sym-jet", 
                brand: "SIMOTA", 
                dateAdded: "2024-04-15",
                shortDescription: "SIMOTA碳纖維後照鏡，輕量化設計提升視覺質感",
                fullDescription: "<p>SIMOTA碳纖維後照鏡採用真碳纖維材質，不僅重量輕，更具備優異的視覺效果。符合法規標準，提供清晰的後方視野。</p>",
                specifications: { "適用車型": "SYM JET/DRG系列", "材質": "真碳纖維", "重量": "200g/對", "認證": "DOT認證" }
            },
            "masa-floating-disc": { 
                id: "masa-floating-disc", 
                name: "MASA浮動碟盤", 
                price: 2888, 
                image: "images/parts/FAR黑金碟盤.webp", 
                images: [
                    "images/parts/FAR黑金碟盤.webp",
                    "images/parts/FAR黑金碟盤2.webp"
                ],
                category: "brakes", 
                mainCategory: "sym-jet", 
                brand: "MASA", 
                dateAdded: "2024-03-10",
                shortDescription: "MASA浮動碟盤，提升制動效能和散熱性能",
                fullDescription: "<p>MASA浮動碟盤採用浮動式設計，能有效減少熱變形，提升制動穩定性。高品質鋼材製造，耐用性佳。</p>",
                specifications: { "適用車型": "SYM JET系列", "材質": "高碳鋼", "直徑": "260mm", "厚度": "4mm" }
            },
            "koso-chest-cover": { 
                id: "koso-chest-cover", 
                name: "KOSO導風胸蓋", 
                price: 1600, 
                image: "images/parts/KOSO導風胸蓋.webp", 
                images: [
                    "images/parts/KOSO導風胸蓋.webp",
                    "images/parts/KOSO導風胸蓋2.webp",
                    "images/parts/KOSO導風胸蓋3.webp"
                ],
                category: "appearance", 
                mainCategory: "sym-jet", 
                brand: "KOSO", 
                dateAdded: "2024-02-28",
                shortDescription: "KOSO導風胸蓋，優化氣流並提升外觀質感",
                fullDescription: "<p>KOSO導風胸蓋設計精良，不僅能優化引擎散熱氣流，更提升整體外觀質感。安裝簡易，品質可靠。</p>",
                specifications: { "適用車型": "SYM JET系列", "材質": "高品質ABS塑料", "功能": "導風散熱" }
            },
            "koso-dragon-turn-signal": { 
                id: "koso-dragon-turn-signal", 
                name: "KOSO龍紋序列式方向燈", 
                price: 6500, 
                image: "images/parts/KOSO龍紋序列式方向燈.webp", 
                images: [
                    "images/parts/KOSO龍紋序列式方向燈.webp",
                    "images/parts/KOSO龍紋序列式方向燈2.webp",
                    "images/parts/KOSO龍紋序列式方向燈3.webp"
                ],
                category: "electronics", 
                mainCategory: "sym-jet", 
                brand: "KOSO", 
                dateAdded: "2024-06-18",
                shortDescription: "KOSO龍紋序列式方向燈，時尚LED設計提升安全性",
                fullDescription: "<p>KOSO龍紋序列式方向燈採用LED序列式設計，不僅外觀時尚，更能提升夜間騎乘安全性。通過車安認證。</p><p><strong>特色功能：</strong><br>• 序列式LED動畫<br>• 龍紋圖案設計<br>• 提升能見度<br>• 簡易安裝<br>• 高品質材料</p>",
                specifications: { 
                    "適用車型": "SYM JET系列、YAMAHA FORCE系列", 
                    "燈源": "LED",
                    "功率": "12V",
                    "認證": "車安認證"
                }
            },
            "skuny-headlight-armor": { 
                id: "skuny-headlight-armor", 
                name: "SKUNY大燈護甲", 
                price: 990, 
                image: "images/parts/REYS水箱護罩.webp", 
                images: [
                    "images/parts/REYS水箱護罩.webp",
                    "images/parts/REYS水箱護罩2.webp",
                    "images/parts/REYS水箱護罩3.webp"
                ],
                category: "appearance", 
                mainCategory: "sym-jet", 
                brand: "SKUNY", 
                dateAdded: "2024-06-17",
                shortDescription: "SKUNY大燈護甲，保護大燈免受損傷",
                fullDescription: "<p>SKUNY大燈護甲採用高韌性材料製造，能有效保護大燈免受碎石撞擊。透明設計不影響照明效果。</p>",
                specifications: { "適用車型": "SYM JET系列", "材質": "高韌性聚碳酸酯", "透光率": "95%以上" }
            },
            "apexx-gt-heat-shield": { 
                id: "apexx-gt-heat-shield", 
                name: "APEXX GT防燙蓋", 
                price: 980, 
                image: "images/parts/APEXX媚眼.webp", 
                images: [
                    "images/parts/APEXX媚眼.webp",
                    "images/parts/APEXX媚眼2.webp",
                    "images/parts/APEXX媚眼3.webp"
                ],
                category: "exhaust", 
                mainCategory: "sym-jet", 
                brand: "APEXX", 
                dateAdded: "2024-01-20",
                shortDescription: "APEXX GT系列排氣防燙蓋，有效降低燙傷風險",
                fullDescription: "<p>APEXX GT系列防燙蓋採用耐高溫材料製造，有效降低排氣管燙傷風險。造型美觀，安裝簡易。</p>",
                specifications: { "適用車型": "SYM JET系列", "材質": "耐高溫塑料", "耐溫": "200°C" }
            },
            // YAMAHA BWS系列
            "bws-power-kit": { 
                id: "bws-power-kit", 
                name: "BWS動力系統升級套件", 
                price: 15800, 
                image: "images/parts/ARACER SPORTD.webp", 
                images: [
                    "images/parts/ARACER SPORTD.webp",
                    "images/parts/ARACER SPORTD2.webp",
                    "images/parts/ARACER SPORTD3.webp",
                    "images/parts/ARACER SPORTD4.webp"
                ],
                category: "engine", 
                mainCategory: "yamaha-bws", 
                brand: "ARACER", 
                dateAdded: "2024-06-01",
                shortDescription: "BWS專用動力升級套件，提升馬力和扭力輸出",
                fullDescription: "<p>ARACER為BWS系列開發的專用動力套件，包含ECU調校、進氣系統優化等，能有效提升15-20%動力輸出。</p>",
                specifications: { 
                    "適用車型": "YAMAHA BWS系列", 
                    "馬力提升": "15-20%", 
                    "扭力提升": "10-15%", 
                    "保固": "六個月" 
                }
            },
            // KYMCO系列
            "racing-thunder-power-kit": { 
                id: "racing-thunder-power-kit", 
                name: "雷霆動力系統升級", 
                price: 16500, 
                image: "images/parts/ARACER SPORTD.webp", 
                images: [
                    "images/parts/ARACER SPORTD.webp",
                    "images/parts/ARACER SPORTD2.webp",
                    "images/parts/ARACER SPORTD3.webp",
                    "images/parts/ARACER SPORTD4.webp"
                ],
                category: "engine", 
                mainCategory: "kymco-racing", 
                brand: "ARACER", 
                dateAdded: "2024-04-20",
                shortDescription: "雷霆專用動力升級，釋放引擎潛能",
                fullDescription: "<p>ARACER專為雷霆系列開發的動力升級套件，透過ECU重新調校和進氣系統優化，大幅提升動力表現。</p>",
                specifications: { 
                    "適用車型": "KYMCO雷霆125/150", 
                    "馬力提升": "18-25%", 
                    "扭力提升": "12-18%", 
                    "油耗改善": "5-8%" 
                }
            },
            // KYMCO KRV系列
            "krv-power-upgrade": { 
                id: "krv-power-upgrade", 
                name: "KRV動力升級套件", 
                price: 17200, 
                image: "images/parts/ARACER SPORTD.webp", 
                images: [
                    "images/parts/ARACER SPORTD.webp",
                    "images/parts/ARACER SPORTD2.webp",
                    "images/parts/ARACER SPORTD3.webp",
                    "images/parts/ARACER SPORTD4.webp"
                ],
                category: "engine", 
                mainCategory: "kymco-krv", 
                brand: "ARACER", 
                dateAdded: "2024-06-15",
                shortDescription: "KRV專用動力升級套件，提升整體性能表現",
                fullDescription: "<p>ARACER為KRV系列開發的專用動力套件，透過ECU調校和進氣系統優化，顯著提升動力輸出。</p>",
                specifications: { 
                    "適用車型": "KYMCO KRV 180", 
                    "馬力提升": "20-25%", 
                    "扭力提升": "15-20%", 
                    "保固": "六個月" 
                }
            },
            // SYM 黑曼巴MMBCU系列
            "mmbcu-suspension-kit": { 
                id: "mmbcu-suspension-kit", 
                name: "黑曼巴避震升級套件", 
                price: 22800, 
                image: "images/parts/野蠻公牛ARX經典版預載可調前叉.webp", 
                images: [
                    "images/parts/野蠻公牛ARX經典版預載可調前叉.webp",
                    "images/parts/野蠻公牛ARX經典版預載可調前叉2.webp",
                    "images/parts/野蠻公牛ARX經典版預載可調前叉3.webp",
                    "images/parts/野蠻公牛ARX經典版預載可調前叉4.webp",
                    "images/parts/野蠻公牛ARX經典版預載可調前叉5.webp"
                ],
                category: "suspension", 
                mainCategory: "sym-mmbcu", 
                brand: "怪獸工廠", 
                dateAdded: "2024-06-10",
                shortDescription: "黑曼巴專用避震套件，極致操控體驗",
                fullDescription: "<p>怪獸工廠為黑曼巴MMBCU量身打造的高性能避震套件，提供賽道級的操控表現。</p>",
                specifications: { 
                    "適用車型": "SYM 黑曼巴MMBCU 125", 
                    "材質": "航太級鋁合金", 
                    "調整功能": "預載/阻尼可調" 
                }
            },
            // YAMAHA 勁戰系列
            "cygnus-exhaust-system": { 
                id: "cygnus-exhaust-system", 
                name: "勁戰競技排氣管", 
                price: 8800, 
                image: "images/parts/牛王SVR排氣管.webp", 
                images: [
                    "images/parts/牛王SVR排氣管.webp",
                    "images/parts/牛王SVR排氣管2.webp",
                    "images/parts/牛王SVR排氣管3.webp"
                ],
                category: "exhaust", 
                mainCategory: "yamaha-cygnus", 
                brand: "SKUNY", 
                dateAdded: "2024-05-20",
                shortDescription: "勁戰專用競技排氣管，提升動力與音效",
                fullDescription: "<p>SKUNY為勁戰系列設計的競技排氣管，不僅提升動力輸出，更帶來迷人的排氣音效。</p>",
                specifications: { 
                    "適用車型": "YAMAHA 勁戰125/150", 
                    "材質": "不鏽鋼", 
                    "重量": "2.8kg", 
                    "音量": "95dB" 
                }
            },
            // AUGUR系列
            "augur-brake-upgrade": { 
                id: "augur-brake-upgrade", 
                name: "AUGUR煞車升級套件", 
                price: 12500, 
                image: "images/parts/ANC72大對四卡鉗.webp", 
                images: [
                    "images/parts/ANC72大對四卡鉗.webp",
                    "images/parts/ANC72大對四卡鉗2.webp",
                    "images/parts/ANC72大對四卡鉗3.webp"
                ],
                category: "brakes", 
                mainCategory: "augur", 
                brand: "MASA", 
                dateAdded: "2024-04-25",
                shortDescription: "AUGUR專用煞車升級套件，極致制動性能",
                fullDescription: "<p>MASA為AUGUR系列開發的專業煞車套件，提供卓越的制動力和散熱效果。</p>",
                specifications: { 
                    "適用車型": "AUGUR系列", 
                    "材質": "高碳鋼碟盤", 
                    "來令片": "高性能複合材料" 
                }
            }
        };

        // Category display names
        const categoryDisplayNames = {
            "sym-jet": "SYM JET Series",
            "yamaha-bws": "YAMAHA BWS Series", 
            "yamaha-cygnus": "YAMAHA 勁戰系列",
            "kymco-racing": "KYMCO雷霆系列",
            "kymco-krv": "KYMCO KRV系列",
            "sym-mmbcu": "SYM 黑曼巴MMBCU系列",
            "augur": "AUGUR系列",
            "suspension": "避震懸吊系統",
            "exhaust": "排氣系統", 
            "appearance": "外觀改裝",
            "electronics": "電子設備",
            "brakes": "煞車制動系統",
            "engine": "引擎動力系統"
        };

        document.addEventListener('DOMContentLoaded', function() {
            const productDetailContent = document.getElementById('product-detail-content');
            const productAdditionalContent = document.getElementById('product-additional-content');
            const productNotFoundDiv = document.getElementById('product-not-found');
            
            const urlParams = new URLSearchParams(window.location.search);
            const productId = urlParams.get('id');
            const product = mockProductDetailDB[productId] || mockProductsDB[productId];
            
            if (product) {
                // 顯示產品詳情
                productDetailContent.style.display = '';
                productAdditionalContent.style.display = '';
                productNotFoundDiv.style.display = 'none';
                
                // 更新頁面標題和內容
                document.title = `${product.name} - MotoWeb`;
                
                // 更新產品資訊
                updateProductDisplay(product);
                
                // 初始化圖片畫廊
                initImageGallery(product);
                
                // 初始化圖片縮放功能
                initImageZoom();
            } else {
                // 顯示未找到產品
                document.title = "Product Not Found - MotoWeb";
                productDetailContent.style.display = 'none';
                productAdditionalContent.style.display = 'none';
                productNotFoundDiv.style.display = 'block';
                
                const breadcrumbContainer = document.getElementById('breadcrumb-container');
                if (breadcrumbContainer) {
                    breadcrumbContainer.innerHTML = [
                        '<li><a href="index.html">Home</a></li>',
                        '<li><a href="products.html">Products</a></li>',
                        '<li>Product Not Found</li>'
                    ].join('');
                }
            }
            
            // 初始化其他功能
            if (typeof initMobileNav === 'function') initMobileNav();
            if (typeof initAuthState === 'function') initAuthState();
        });
        
        function updateProductDisplay(product) {
            // Update product image
            const productImage = document.getElementById('product-image');
            if (productImage) {
                productImage.src = product.image || 'images/parts/placeholder-product.png';
                productImage.alt = product.name;
            }
            
            // Update product name
            const productName = document.getElementById('product-name');
            if (productName) {
                productName.textContent = product.name;
            }
            
            // Update brand information
            const productBrand = document.getElementById('product-brand');
            const productBrandLink = document.getElementById('product-brand-link');
            if (productBrand) {
                productBrand.textContent = product.brand || 'N/A';
            }
            if (productBrandLink && product.brand) {
                productBrandLink.href = `products.html?brand=${encodeURIComponent(product.brand)}`;
            }
            
            // Update price
            const productPrice = document.getElementById('product-price');
            if (productPrice) {
                productPrice.textContent = `NT$${product.price.toLocaleString()}`;
            }
            
            // Update descriptions
            const shortDesc = document.getElementById('product-short-description');
            if (shortDesc) {
                shortDesc.innerHTML = product.shortDescription || '<p>No product description available</p>';
            }
            
            const fullDesc = document.getElementById('product-full-description');
            if (fullDesc) {
                fullDesc.innerHTML = product.fullDescription || '<p>No detailed description available</p>';
            }
            
            // Update specifications
            const specs = document.getElementById('product-specifications');
            if (specs) {
                const specsList = specs.querySelector('ul');
                if (specsList && product.specifications) {
                    specsList.innerHTML = Object.entries(product.specifications)
                        .map(([key, value]) => `<li><strong>${key}:</strong> ${value}</li>`)
                        .join('');
                }
            }
            
            // Setup shopping cart button
            const addToCartBtn = document.getElementById('add-to-cart-btn');
            if (addToCartBtn) {
                addToCartBtn.onclick = function() {
                    const quantity = document.getElementById('quantity').value;
                    
                    // Add visual feedback
                    addToCartBtn.innerHTML = '<i class="fas fa-check"></i> Added!';
                    addToCartBtn.style.background = 'linear-gradient(45deg, var(--success-color), var(--success-color))';
                    
                    setTimeout(() => {
                        addToCartBtn.innerHTML = '<i class="fas fa-shopping-cart"></i> Add to Cart';
                        addToCartBtn.style.background = 'linear-gradient(45deg, var(--primary-color), var(--accent-color))';
                    }, 2000);
                    
                    alert(`Added ${quantity} x "${product.name}" to cart successfully!`);
                };
            }
            
            // Update breadcrumbs
            const breadcrumbContainer = document.getElementById('breadcrumb-container');
            if (breadcrumbContainer) {
                const breadcrumbs = ['<li><a href="index.html">Home</a></li>'];
                breadcrumbs.push('<li><a href="products.html">Products</a></li>');
                
                if (product.mainCategory && categoryDisplayNames[product.mainCategory]) {
                    breadcrumbs.push(`<li><a href="products.html?category=${product.mainCategory}">${categoryDisplayNames[product.mainCategory]}</a></li>`);
                }
                
                if (product.category && categoryDisplayNames[product.category] && product.category !== product.mainCategory) {
                    breadcrumbs.push(`<li><a href="products.html?category=${product.category}">${categoryDisplayNames[product.category]}</a></li>`);
                }
                
                breadcrumbs.push(`<li>${product.name}</li>`);
                breadcrumbContainer.innerHTML = breadcrumbs.join('');
            }
        }

        function initImageGallery(product) {
            const gallery = document.getElementById('image-gallery');
            const mainImage = document.getElementById('product-image');
            
            if (product.images && product.images.length > 1 && gallery) {
                gallery.innerHTML = '';
                product.images.forEach((imageSrc, index) => {
                    const thumb = document.createElement('img');
                    thumb.src = imageSrc;
                    thumb.alt = `${product.name} - Image ${index + 1}`;
                    thumb.className = 'gallery-thumb' + (index === 0 ? ' active' : '');
                    thumb.onclick = () => {
                        mainImage.src = imageSrc;
                        document.querySelectorAll('.gallery-thumb').forEach(t => t.classList.remove('active'));
                        thumb.classList.add('active');
                    };
                    gallery.appendChild(thumb);
                });
            }
        }

        function initImageZoom() {
            const mainImage = document.getElementById('product-image');
            const zoomOverlay = document.getElementById('zoom-overlay');
            const zoomImage = document.getElementById('zoom-image');
            const zoomClose = document.getElementById('zoom-close');
            
            mainImage.onclick = () => {
                zoomImage.src = mainImage.src;
                zoomOverlay.style.display = 'flex';
                document.body.style.overflow = 'hidden';
            };
            
            zoomClose.onclick = closeZoom;
            zoomOverlay.onclick = (e) => {
                if (e.target === zoomOverlay) closeZoom();
            };
            
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') closeZoom();
            });
            
            function closeZoom() {
                zoomOverlay.style.display = 'none';
                document.body.style.overflow = 'auto';
            }
        }
    </script>
</body>
</html> 

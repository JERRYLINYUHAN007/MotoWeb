<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¤¾ç¾¤è¨è«– | MotoWeb</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/tech-theme.css">
    <link rel="stylesheet" href="css/community.css">
    <link rel="icon" href="images/favicon.ico" type="image/x-icon">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* Community é é¢å°ˆç”¨æ¨£å¼ - ç¾ä»£ç§‘æŠ€é¢¨æ ¼ */
        .main-container {
            margin-top: 80px;
            min-height: 100vh;
            background: var(--secondary-color);
        }

        .community-main-content {
            display: flex;
            gap: 3rem;
            padding: 2rem 5%;
            max-width: 1400px;
            margin: 0 auto;
            background: var(--secondary-color);
        }

        /* å´é‚Šæ¬„æ¨£å¼ - ç§‘æŠ€é¢¨æ ¼ */
        .community-sidebar {
            flex: 0 0 320px;
            background: linear-gradient(145deg, var(--mid-surface), var(--dark-surface));
            padding: 2rem;
            border-radius: 20px;
            height: fit-content;
            box-shadow: 
                0 8px 25px rgba(0, 0, 0, 0.4),
                0 0 20px rgba(0, 212, 255, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            border: 2px solid var(--carbon-gray);
            position: sticky;
            top: 100px;
        }

        .community-sidebar h3 {
            font-size: 1.6rem;
            color: var(--primary-color);
            margin-bottom: 1.5rem;
            padding-bottom: 0.8rem;
            border-bottom: 2px solid var(--primary-color);
            text-shadow: 0 0 10px rgba(0, 212, 255, 0.5);
            font-weight: 700;
        }

        .category-list ul {
            list-style: none;
            padding: 0;
        }

        .category-list li {
            margin-bottom: 0.5rem;
        }

        .category-list a {
            display: block;
            padding: 0.8rem 1rem;
            color: var(--metallic-silver);
            text-decoration: none;
            border-radius: 8px;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .category-list a:hover,
        .category-list a.active {
            color: white;
            background: linear-gradient(45deg, var(--primary-color), var(--accent-color));
            font-weight: 600;
            box-shadow: 0 0 15px rgba(0, 212, 255, 0.3);
            transform: translateX(5px);
        }

        .popular-tags h3 {
            margin-top: 2rem;
        }

        .tag-cloud {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .tag {
            padding: 0.5rem 1rem;
            background: linear-gradient(145deg, var(--light-surface), var(--mid-surface));
            color: var(--metallic-silver);
            text-decoration: none;
            border-radius: 20px;
            font-size: 0.85rem;
            border: 1px solid var(--carbon-gray);
            transition: all 0.3s ease;
        }

        .tag:hover {
            background: linear-gradient(45deg, var(--primary-color), var(--accent-color));
            color: white;
            box-shadow: 0 0 15px rgba(0, 212, 255, 0.3);
            transform: translateY(-2px);
        }

        /* è¨è«–å€åŸŸæ¨£å¼ */
        .community-display-area {
            flex: 1;
            background: var(--secondary-color);
        }

        .community-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding: 1.5rem 2rem;
            background: linear-gradient(145deg, var(--mid-surface), var(--dark-surface));
            border-radius: 15px;
            box-shadow: 
                0 8px 25px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .results-count {
            color: var(--metallic-silver);
            font-size: 1.1rem;
            font-weight: 600;
        }

        .view-options .btn {
            font-size: 0.95rem;
            padding: 10px 20px;
        }

        /* è¨è«–åˆ—è¡¨æ¨£å¼ */
        .discussion-list {
            display: grid;
            gap: 2rem;
        }

        .discussion-item {
            background: linear-gradient(145deg, var(--mid-surface), var(--dark-surface));
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 
                0 8px 25px rgba(0, 0, 0, 0.4),
                0 0 20px rgba(0, 212, 255, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 2px solid transparent;
            position: relative;
            color: white;
        }

        .discussion-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, 
                var(--primary-color), 
                var(--accent-color), 
                var(--success-color));
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .discussion-item:hover {
            transform: translateY(-8px);
            box-shadow: 
                0 25px 50px rgba(0, 0, 0, 0.5),
                0 0 40px rgba(0, 212, 255, 0.3),
                0 0 60px rgba(124, 58, 237, 0.2);
            border-color: var(--primary-color);
        }

        .discussion-item:hover::before {
            opacity: 1;
        }

        .discussion-header {
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
            gap: 1rem;
        }

        .discussion-user-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: 2px solid var(--success-color);
            box-shadow: 0 0 15px rgba(0, 255, 136, 0.3);
        }

        .user-info h4 {
            margin: 0;
            color: white;
            font-weight: 700;
        }

        .user-info span {
            color: var(--metallic-silver);
            font-size: 0.9rem;
        }

        .discussion-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: white;
            margin-bottom: 1rem;
            transition: color 0.3s ease;
        }

        .discussion-item:hover .discussion-title {
            color: var(--primary-color);
            text-shadow: 0 0 10px rgba(0, 212, 255, 0.5);
        }

        .discussion-content {
            color: var(--metallic-silver);
            line-height: 1.6;
            margin-bottom: 1.5rem;
        }

        .discussion-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 1rem;
            border-top: 1px solid var(--carbon-gray);
        }

        .discussion-stats {
            display: flex;
            gap: 1.5rem;
        }

        .discussion-stats span {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--metallic-silver);
            font-size: 0.9rem;
        }

        .discussion-stats i {
            color: var(--success-color);
        }

        .category-tag {
            background: linear-gradient(45deg, var(--primary-color), var(--accent-color));
            color: white;
            padding: 0.4rem 0.8rem;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* è¼‰å…¥æŒ‡ç¤ºå™¨ */
        .loading {
            text-align: center;
            padding: 4rem;
            color: var(--metallic-silver);
            font-size: 1.2rem;
        }

        .loading i {
            color: var(--primary-color);
            margin-right: 0.8rem;
        }

        /* åˆ†é æ¨£å¼ */
        .pagination {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin-top: 3rem;
        }

        .pagination a,
        .pagination span {
            padding: 0.8rem 1.2rem;
            background: linear-gradient(145deg, var(--mid-surface), var(--dark-surface));
            color: var(--metallic-silver);
            text-decoration: none;
            border-radius: 12px;
            border: 1px solid var(--carbon-gray);
            transition: all 0.3s ease;
        }

        .pagination a:hover,
        .pagination .active {
            background: linear-gradient(45deg, var(--primary-color), var(--accent-color));
            color: white;
            box-shadow: 0 0 15px rgba(0, 212, 255, 0.3);
        }

        /* éŸ¿æ‡‰å¼è¨­è¨ˆ */
        @media (max-width: 1200px) {
            .community-main-content {
                gap: 2rem;
            }
            
            .community-sidebar {
                flex: 0 0 280px;
            }
        }

        @media (max-width: 768px) {
            .community-main-content {
                flex-direction: column;
                padding: 1rem 3%;
            }

            .community-sidebar {
                flex: none;
                position: static;
                margin-bottom: 2rem;
            }

            .community-header {
                flex-direction: column;
                gap: 1rem;
                align-items: stretch;
                text-align: center;
            }

            .discussion-header {
                flex-direction: column;
                text-align: center;
                gap: 0.8rem;
            }

            .discussion-footer {
                flex-direction: column;
                gap: 1rem;
                align-items: center;
            }
        }

        /* é é¢æ¨™é¡Œå€å¡Šæ¨£å¼ */
        .page-header {
            background: 
                linear-gradient(135deg, 
                    rgba(10, 10, 10, 0.95), 
                    rgba(31, 41, 55, 0.9)),
                radial-gradient(circle at 30% 40%, rgba(0, 212, 255, 0.1), transparent),
                radial-gradient(circle at 70% 60%, rgba(124, 58, 237, 0.1), transparent),
                url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="circuit" patternUnits="userSpaceOnUse" width="40" height="40"><rect width="40" height="40" fill="%23111827"/><path d="M0,20 L40,20 M20,0 L20,40" stroke="%2300d4ff" stroke-width="0.5" opacity="0.3"/><circle cx="20" cy="20" r="2" fill="%2300d4ff" opacity="0.5"/></pattern></defs><rect width="100" height="100" fill="url(%23circuit)"/></svg>');
            background-size: cover, cover, cover, 80px 80px;
            color: white;
            padding: 6rem 5% 4rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .page-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 2px;
            height: 100%;
            background: linear-gradient(to bottom, transparent, var(--primary-color), transparent);
            animation: scanEffect 8s infinite linear;
        }

        @keyframes scanEffect {
            0% { transform: translateX(-100%); opacity: 0; }
            50% { opacity: 1; }
            100% { transform: translateX(100%); opacity: 0; }
        }

        @keyframes titleGlow {
            0%, 100% { 
                background-position: 0% 50%;
                filter: brightness(1) drop-shadow(0 0 20px rgba(0, 212, 255, 0.5));
            }
            50% { 
                background-position: 100% 50%;
                filter: brightness(1.2) drop-shadow(0 0 30px rgba(124, 58, 237, 0.8));
            }
        }

        .page-header h1 {
            font-size: 3.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            background: linear-gradient(45deg, 
                #ffffff, 
                var(--primary-color), 
                var(--accent-color), 
                var(--success-color), 
                #ffffff);
            background-size: 400% 400%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: titleGlow 4s ease-in-out infinite;
            text-shadow: 0 0 30px rgba(0, 212, 255, 0.5);
            position: relative;
        }

        .page-header p {
            font-size: 1.3rem;
            color: var(--metallic-silver);
            margin-bottom: 2.5rem;
            opacity: 0.9;
        }

        .search-bar {
            max-width: 600px;
            margin: 0 auto;
            display: flex;
            gap: 0;
            background: linear-gradient(145deg, var(--mid-surface), var(--dark-surface));
            border-radius: 50px;
            border: 2px solid var(--carbon-gray);
            overflow: hidden;
            box-shadow: 
                0 10px 30px rgba(0, 0, 0, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .search-bar input {
            flex: 1;
            padding: 1.2rem 2rem;
            border: none;
            background: transparent;
            color: white;
            font-size: 1.1rem;
            outline: none;
        }

        .search-bar input::placeholder {
            color: var(--metallic-silver);
        }

        .search-bar .search-btn {
            padding: 1.2rem 2rem;
            background: linear-gradient(45deg, var(--primary-color), var(--accent-color));
            border: none;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .search-bar .search-btn:hover {
            background: linear-gradient(45deg, var(--accent-color), var(--success-color));
            box-shadow: 0 0 25px rgba(0, 212, 255, 0.5);
        }

        /* éŸ¿æ‡‰å¼è¨­è¨ˆ */
        @media (max-width: 968px) {
            .page-header h1 {
                font-size: 2.5rem;
            }
            
            .page-header p {
                font-size: 1.1rem;
            }
        }

        @media (max-width: 768px) {
            .page-header {
                padding: 4rem 5% 3rem;
            }
            
            .page-header h1 {
                font-size: 2rem;
            }
            
            .search-bar {
                flex-direction: column;
                border-radius: 20px;
            }
            
            .search-bar input,
            .search-bar .search-btn {
                border-radius: 15px;
            }
        }

        @media (max-width: 480px) {
            .page-header {
                padding: 3rem 5% 2rem;
            }
            
            .page-header h1 {
                font-size: 1.8rem;
            }
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="container nav-container">
            <div class="logo">
                <a href="index.html" aria-label="motowebé¦–é ">
                    <img src="images/motoweb-logo.svg" alt="motoweb Logo" class="logo-img">
                </a>
            </div>
            <div class="nav-links" id="navLinks">
                <div class="main-nav">
                    <a href="index.html">é¦–é </a>
                    <a href="products.html">æ”¹è£é›¶ä»¶</a>
                    <a href="community.html" class="active" aria-current="page">ç¤¾ç¾¤è¨è«–</a>
                    <a href="gallery.html">ä½œå“å±•ç¤º</a>
                    <a href="events.html">æ”¹è£æ´»å‹•</a>
                </div>
                <div class="auth-buttons">
                    <a href="login.html" class="btn btn-secondary">ç™»å…¥</a>
                    <a href="register.html" class="btn btn-primary">è¨»å†Š</a>
                </div>
                <div class="user-menu" style="display: none;">
                    <div class="user-avatar">
                        <img src="images/default-avatar.svg" alt="ç”¨æˆ¶é ­åƒ" class="avatar">
                        <span class="username">ç”¨æˆ¶åç¨±</span>
                    </div>
                    <div class="dropdown-menu">
                        <a href="/profile.html"><i class="fas fa-user"></i> å€‹äººè³‡æ–™</a>
                        <a href="/garage.html"><i class="fas fa-motorcycle"></i> æˆ‘çš„è»Šåº«</a>
                        <a href="/settings.html"><i class="fas fa-cog"></i> å¸³è™Ÿè¨­å®š</a>
                        <a href="#" id="logout"><i class="fas fa-sign-out-alt"></i> ç™»å‡º</a>
                    </div>
                </div>
            </div>
            <button class="menu-toggle" aria-label="å±•é–‹é¸å–®" aria-expanded="false" aria-controls="navLinks">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </button>
        </div>
    </nav>

    <!-- ä¸»è¦å…§å®¹å€åŸŸ -->
    <main class="main-container">
        <header class="page-header">
            <h1>ç¤¾ç¾¤è¨è«–</h1>
            <p>åˆ†äº«ä½ çš„æ”¹è£ç¶“é©—ï¼Œèˆ‡è»Šå‹å€‘ä¸€èµ·äº¤æµè¨è«–</p>
            <div class="search-bar">
                <input type="text" id="search-input" placeholder="æœå°‹è¨è«–å…§å®¹...">
                <button class="search-btn" id="search-btn"><i class="fas fa-search"></i></button>
            </div>
        </header>

        <main class="community-main-content">
            <div class="content-layout">
            <aside class="community-sidebar" id="community-sidebar">
                <h3>è¨è«–åˆ†é¡</h3>
                
                <div class="category-list">
                    <ul id="category-list">
                        <li><a href="#" data-category="all" class="active">æ‰€æœ‰åˆ†é¡ (è¼‰å…¥ä¸­...)</a></li>
                        <li><a href="#" data-category="æ’æ°£ç³»çµ±">æ’æ°£ç³»çµ± (è¼‰å…¥ä¸­...)</a></li>
                        <li><a href="#" data-category="æ‡¸åŠç³»çµ±">æ‡¸åŠç³»çµ± (è¼‰å…¥ä¸­...)</a></li>
                        <li><a href="#" data-category="å¼•æ“æ”¹è£">å¼•æ“æ”¹è£ (è¼‰å…¥ä¸­...)</a></li>
                        <li><a href="#" data-category="é›»å­ç³»çµ±">é›»å­ç³»çµ± (è¼‰å…¥ä¸­...)</a></li>
                        <li><a href="#" data-category="å¤–è§€å¥—ä»¶">å¤–è§€å¥—ä»¶ (è¼‰å…¥ä¸­...)</a></li>
                        <li><a href="#" data-category="ä¿é¤Šç¶­è­·">ä¿é¤Šç¶­è­· (è¼‰å…¥ä¸­...)</a></li>
                    </ul>
            </div>

                <!-- ç†±é–€æ¨™ç±¤ -->
                <div class="popular-tags">
                    <h3>ç†±é–€æ¨™ç±¤</h3>
                    <div class="tag-cloud" id="popular-tags">
                        <a href="#" class="tag" data-tag="æ’æ°£ç®¡">#æ’æ°£ç®¡</a>
                        <a href="#" class="tag" data-tag="é¿éœ‡å™¨">#é¿éœ‡å™¨</a>
                        <a href="#" class="tag" data-tag="å‹•åŠ›æå‡">#å‹•åŠ›æå‡</a>
                        <a href="#" class="tag" data-tag="LED">#LED</a>
                        <a href="#" class="tag" data-tag="ä¿é¤Š">#ä¿é¤Š</a>
                        <a href="#" class="tag" data-tag="æ–°æ‰‹">#æ–°æ‰‹</a>
            </div>
        </div>
        </aside>

            <section class="community-display-area">
                <div class="community-header">
                    <div class="results-count">
                        <span id="discussion-count">è¨è«–æ–‡ç« </span>
                    </div>
                    <div class="view-options">
                        <button class="btn btn-primary" id="new-post-btn">
                            <i class="fas fa-plus"></i> ç™¼è¡¨æ–‡ç« 
                        </button>
                    </div>
                </div>

                <!-- è¼‰å…¥æŒ‡ç¤ºå™¨ -->
                <div class="loading" id="loading">
                    <i class="fas fa-spinner fa-spin"></i> è¼‰å…¥ä¸­...
                </div>

                <!-- æ–‡ç« åˆ—è¡¨ -->
                <div class="discussion-list" id="discussions-grid">
                    <!-- å‹•æ…‹è¼‰å…¥çš„è¨è«–æ–‡ç«  -->
                </div>

                <!-- åˆ†é æ§åˆ¶ -->
                <div class="pagination" id="pagination">
                    <!-- å‹•æ…‹ç”Ÿæˆåˆ†é æŒ‰éˆ• -->
                </div>
            </section>
        </main>
    </main>

    <!-- ç™¼è¡¨æ–‡ç« æ¨¡æ…‹æ¡† -->
    <div id="post-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ç™¼è¡¨æ–°æ–‡ç« </h2>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <form id="post-form">
                    <div class="form-group">
                        <label for="post-title">æ¨™é¡Œ</label>
                        <input type="text" id="post-title" class="form-control" required maxlength="100" placeholder="è«‹è¼¸å…¥æ–‡ç« æ¨™é¡Œ...">
                    </div>
                    
                    <div class="form-group">
                        <label for="post-category">åˆ†é¡</label>
                        <select id="post-category" class="form-control" required>
                            <option value="">è«‹é¸æ“‡åˆ†é¡</option>
                            <option value="æ’æ°£ç³»çµ±">ğŸï¸ æ’æ°£ç³»çµ±</option>
                            <option value="æ‡¸åŠç³»çµ±">âš™ï¸ æ‡¸åŠç³»çµ±</option>
                            <option value="å¼•æ“æ”¹è£">ğŸ”§ å¼•æ“æ”¹è£</option>
                            <option value="é›»å­ç³»çµ±">ğŸ’¡ é›»å­ç³»çµ±</option>
                            <option value="å¤–è§€å¥—ä»¶">âœ¨ å¤–è§€å¥—ä»¶</option>
                            <option value="ä¿é¤Šç¶­è­·">ğŸ› ï¸ ä¿é¤Šç¶­è­·</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="post-content">å…§å®¹</label>
                        <textarea id="post-content" class="form-control" required rows="6" placeholder="åˆ†äº«ä½ çš„æ”¹è£ç¶“é©—ã€å¿ƒå¾—æˆ–å•é¡Œ...&#10;&#10;ä¾‹å¦‚ï¼š&#10;â€¢ ä½¿ç”¨äº†ä»€éº¼é›¶ä»¶ï¼Ÿ&#10;â€¢ æ”¹è£éç¨‹å¦‚ä½•ï¼Ÿ&#10;â€¢ æœ‰ä»€éº¼å»ºè­°æˆ–æ³¨æ„äº‹é …ï¼Ÿ"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="tag-input" class="optional-label">æ¨™ç±¤ (æœ€å¤š5å€‹ï¼Œå¯é¸)</label>
                        <div class="tag-input-container" id="tag-container">
                            <input type="text" id="tag-input" class="tag-input" placeholder="è¼¸å…¥æ¨™ç±¤å¾ŒæŒ‰ Enterï¼Œä¾‹å¦‚ï¼šæ’æ°£ç®¡ã€æ€§èƒ½æå‡">
                        </div>
                        <small class="form-hint">ğŸ’¡ æ·»åŠ ç›¸é—œæ¨™ç±¤å¯ä»¥è®“æ›´å¤šäººæ‰¾åˆ°ä½ çš„æ–‡ç« </small>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-secondary" id="cancel-btn">å–æ¶ˆ</button>
                <button type="button" class="btn-primary" id="submit-btn">ç™¼è¡¨æ–‡ç« </button>
            </div>
        </div>
    </div>

    <!-- é è…³ -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section about">
                    <div class="footer-logo">
                        <img src="images/motoweb-logo.svg" alt="motoweb Logo" class="footer-logo-img">
                    </div>
                    <p>å°ˆæ¥­çš„æ‘©æ‰˜è»Šæ”¹è£ç¤¾ç¾¤å¹³å°ï¼Œç‚ºè»Šå‹æä¾›äº¤æµèˆ‡åˆ†äº«çš„ç©ºé–“ã€‚</p>
                    <div class="social-links">
                        <a href="#" aria-label="Facebook"><i class="fab fa-facebook"></i></a>
                        <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                        <a href="#" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
                        <a href="#" aria-label="Discord"><i class="fab fa-discord"></i></a>
                    </div>
                </div>
                <div class="footer-section links">
                    <h3>å¿«é€Ÿé€£çµ</h3>
                    <ul>
                        <li><a href="about.html">é—œæ–¼æˆ‘å€‘</a></li>
                        <li><a href="products.html">æ”¹è£é›¶ä»¶</a></li>
                        <li><a href="community.html">ç¤¾ç¾¤è¨è«–</a></li>
                        <li><a href="gallery.html">ä½œå“å±•ç¤º</a></li>
                        <li><a href="events.html">æ”¹è£æ´»å‹•</a></li>
                    </ul>
                </div>
                <div class="footer-section contact">
                    <h3>è¯çµ¡è³‡è¨Š</h3>
                    <ul class="contact-info">
                        <li><i class="fas fa-envelope"></i> contact@MotoWeb.com</li>
                        <li><i class="fas fa-phone"></i> (02) 1234-5678</li>
                        <li><i class="fas fa-map-marker-alt"></i> å°åŒ—å¸‚ä¿¡ç¾©å€æ¾ä»è·¯100è™Ÿ</li>
                    </ul>
                </div>
                <div class="footer-section newsletter">
                    <h3>è¨‚é–±é›»å­å ±</h3>
                    <p>ç²å–æœ€æ–°æ”¹è£è¶¨å‹¢èˆ‡æ´»å‹•è³‡è¨Š</p>
                    <form class="newsletter-form" action="subscribe.php" method="POST">
                        <input type="email" name="email" placeholder="æ‚¨çš„é›»å­éƒµä»¶" required>
                        <button type="submit" class="btn btn-primary">è¨‚é–±</button>
                    </form>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 MotoWeb. ä¿ç•™æ‰€æœ‰æ¬Šåˆ©ã€‚</p>
                <div class="footer-bottom-links">
                    <a href="privacy.html">éš±ç§æ”¿ç­–</a>
                    <a href="terms.html">ä½¿ç”¨æ¢æ¬¾</a>
                    <a href="cookies.html">Cookie æ”¿ç­–</a>
                </div>
            </div>
        </div>
    </footer>

    <button id="backToTop" class="back-to-top" aria-label="è¿”å›é é¢é ‚éƒ¨">
        <i class="fas fa-chevron-up"></i>
    </button>

    <!-- JavaScript -->
    <script src="/js/common.js"></script>
    <script src="js/auth-state.js"></script>
    <script src="js/community-api.js"></script>
    <script>
        // ç¤¾ç¾¤APIå¯¦ä¾‹
        const communityAPI = new CommunityAPI();
        
        // å…¨åŸŸè®Šæ•¸
        let currentPage = 1;
        let currentCategory = 'all';
        let currentSearch = '';
        let isLoading = false;

        // DOM å…ƒç´ 
        const discussionsGrid = document.getElementById('discussions-grid');
        const loadingIndicator = document.getElementById('loading');
        const paginationContainer = document.getElementById('pagination');
        const categoryLinks = document.querySelectorAll('#category-list a');
        const searchInput = document.getElementById('search-input');
        const searchBtn = document.getElementById('search-btn');
        const newPostBtn = document.getElementById('new-post-btn');
        const modal = document.getElementById('post-modal');
        const closeBtn = modal ? modal.querySelector('.close') : null;
        const cancelBtn = document.getElementById('cancel-btn');
        const submitBtn = document.getElementById('submit-btn');

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ç¤¾ç¾¤é é¢ DOM è¼‰å…¥å®Œæˆ');
            
            // ç¢ºä¿æ¨¡æ…‹æ¡†åˆå§‹ç‹€æ…‹æ˜¯éš±è—çš„
            const modalElement = document.getElementById('post-modal');
            if (modalElement) {
                modalElement.style.removeProperty('display');
                modalElement.classList.remove('show');
                console.log('æ¨¡æ…‹æ¡†åˆå§‹ç‹€æ…‹å·²è¨­ç½®ç‚ºéš±è—');
                console.log('æ¨¡æ…‹æ¡†åˆå§‹é¡åˆ¥:', modalElement.className);
                console.log('æ¨¡æ…‹æ¡†åˆå§‹æ¨£å¼:', window.getComputedStyle(modalElement).display);
                console.log('æ¨¡æ…‹æ¡†åˆå§‹z-index:', window.getComputedStyle(modalElement).zIndex);
            }
            
            // æª¢æŸ¥é‡è¦å…ƒç´ æ˜¯å¦å­˜åœ¨
            console.log('æ–°æ–‡ç« æŒ‰éˆ•:', document.getElementById('new-post-btn'));
            console.log('æ¨¡æ…‹æ¡†:', document.getElementById('post-modal'));
            console.log('é—œé–‰æŒ‰éˆ•:', closeBtn ? closeBtn : null);
            
            initializeFromURL();
            loadPosts();
            updateCategoryCounts();
            bindEvents();
            
            console.log('ç¤¾ç¾¤é é¢åˆå§‹åŒ–å®Œæˆ');
        });

        // å¾URLåˆå§‹åŒ–é é¢ç‹€æ…‹
        function initializeFromURL() {
            const urlParams = new URLSearchParams(window.location.search);
            currentPage = parseInt(urlParams.get('page')) || 1;
            currentCategory = urlParams.get('category') || 'all';
            currentSearch = urlParams.get('search') || '';
            
            // æ›´æ–°åˆ†é¡é¸ä¸­ç‹€æ…‹
            categoryLinks.forEach(link => {
                link.classList.remove('active');
                if (link.dataset.category === currentCategory) {
                    link.classList.add('active');
                }
            });
            
            // æ›´æ–°æœå°‹æ¡†
            if (currentSearch) {
                searchInput.value = currentSearch;
            }
        }

        // è¼‰å…¥è²¼æ–‡
        async function loadPosts() {
            if (isLoading) return;
            
            isLoading = true;
            showLoading();
            
            try {
                const options = {
                    page: currentPage,
                    limit: 6
                };
                
                if (currentCategory !== 'all') {
                    options.category = currentCategory;
                }
                
                if (currentSearch) {
                    options.search = currentSearch;
                }
                
                const response = await communityAPI.getPosts(options);
                displayPosts(response.posts);
                updatePagination(response);
                
            } catch (error) {
                console.error('è¼‰å…¥è²¼æ–‡å¤±æ•—:', error);
                showError('è¼‰å…¥è²¼æ–‡å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦');
            } finally {
                isLoading = false;
                hideLoading();
            }
        }

        // é¡¯ç¤ºè²¼æ–‡
        function displayPosts(posts) {
            if (!posts || posts.length === 0) {
                discussionsGrid.innerHTML = '<div class="no-posts">æ²’æœ‰æ‰¾åˆ°ç¬¦åˆæ¢ä»¶çš„æ–‡ç« </div>';
                return;
            }
            
            const postsHTML = posts.map(post => `
                <article class="discussion-item">
                    <div class="discussion-avatar">
                        <img src="${post.avatar || 'images/default-avatar.svg'}" 
                             alt="${post.author}çš„é ­åƒ" 
                             onerror="this.src='images/default-avatar.svg'">
                    </div>
                    <div class="discussion-content">
                        <h3 class="discussion-title">
                            <a href="discussion-detail.html?id=${post._id}">${post.title}</a>
                        </h3>
                        
                        <div class="discussion-meta">
                            <span class="discussion-author">by ${post.author}</span>
                            <span class="discussion-date">${formatDate(post.createdAt)}</span>
                            <span class="discussion-category">${post.category}</span>
                        </div>
                        
                        <p class="discussion-excerpt">${post.excerpt}</p>
                        
                        <div class="discussion-tags">
                            ${post.tags.map(tag => `<span class="discussion-tag" data-tag="${tag}">#${tag}</span>`).join('')}
                        </div>
                        
                        <div class="discussion-stats">
                            <span class="stats-item"><i class="fas fa-thumbs-up"></i> ${post.likes}</span>
                            <span class="stats-item"><i class="fas fa-eye"></i> ${post.views}</span>
                            <span class="stats-item"><i class="fas fa-comments"></i> ${post.commentCount}</span>
                        </div>
                    </div>
                </article>
            `).join('');
            
            discussionsGrid.innerHTML = postsHTML;
            
            // ç¶å®šæ¨™ç±¤é»æ“Šäº‹ä»¶
            bindTagEvents();
        }

        // æ›´æ–°åˆ†é 
        function updatePagination(response) {
            if (response.totalPages <= 1) {
                paginationContainer.innerHTML = '';
                return;
            }
            
            let paginationHTML = '';
            
            // ä¸Šä¸€é 
            if (currentPage > 1) {
                paginationHTML += `<a href="#" data-page="${currentPage - 1}">&laquo; ä¸Šä¸€é </a>`;
            }
            
            // é ç¢¼
            const startPage = Math.max(1, currentPage - 2);
            const endPage = Math.min(response.totalPages, currentPage + 2);
            
            if (startPage > 1) {
                paginationHTML += `<a href="#" data-page="1">1</a>`;
                if (startPage > 2) {
                    paginationHTML += '<span>...</span>';
                }
            }
            
            for (let i = startPage; i <= endPage; i++) {
                paginationHTML += `<a href="#" data-page="${i}" ${i === currentPage ? 'class="active"' : ''}>${i}</a>`;
            }
            
            if (endPage < response.totalPages) {
                if (endPage < response.totalPages - 1) {
                    paginationHTML += '<span>...</span>';
                }
                paginationHTML += `<a href="#" data-page="${response.totalPages}">${response.totalPages}</a>`;
            }
            
            // ä¸‹ä¸€é 
            if (currentPage < response.totalPages) {
                paginationHTML += `<a href="#" data-page="${currentPage + 1}">ä¸‹ä¸€é  &raquo;</a>`;
            }
            
            paginationContainer.innerHTML = paginationHTML;
            
            // ç¶å®šåˆ†é é»æ“Šäº‹ä»¶
            bindPaginationEvents();
        }

        // æ›´æ–°åˆ†é¡è¨ˆæ•¸
        async function updateCategoryCounts() {
            try {
                const stats = await communityAPI.getCategoryStats();
                
                categoryLinks.forEach(link => {
                    const category = link.dataset.category;
                    if (category === 'all') {
                        link.textContent = `æ‰€æœ‰åˆ†é¡ (${stats.all || 0})`;
                    } else if (stats[category] !== undefined) {
                        link.textContent = `${category} (${stats[category]})`;
                    } else {
                        link.textContent = `${category} (0)`;
                    }
                });
            } catch (error) {
                console.error('æ›´æ–°åˆ†é¡è¨ˆæ•¸å¤±æ•—:', error);
            }
        }

        // ç¶å®šäº‹ä»¶
        function bindEvents() {
            console.log('é–‹å§‹ç¶å®šäº‹ä»¶');
            
            // åˆ†é¡é»æ“Š
            categoryLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    
                    // æ›´æ–°é¸ä¸­ç‹€æ…‹
                    categoryLinks.forEach(l => l.classList.remove('active'));
                    link.classList.add('active');
                    
                    // æ›´æ–°é é¢ç‹€æ…‹
                    currentCategory = link.dataset.category;
                    currentPage = 1;
                    currentSearch = '';
                    searchInput.value = '';
                    
                    updateURL();
                    loadPosts();
                });
            });
            
            // æœå°‹
            if (searchBtn) {
                searchBtn.addEventListener('click', performSearch);
            }
            if (searchInput) {
                searchInput.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter') {
                        performSearch();
                    }
                });
            }
            
            // æ¨¡æ…‹æ¡†äº‹ä»¶
            console.log('æº–å‚™ç¶å®šæ¨¡æ…‹æ¡†äº‹ä»¶');
            console.log('newPostBtn:', newPostBtn);
            console.log('closeBtn:', closeBtn);
            console.log('cancelBtn:', cancelBtn);
            console.log('submitBtn:', submitBtn);
            
            if (newPostBtn) {
                console.log('ç¶å®šæ–°æ–‡ç« æŒ‰éˆ•é»æ“Šäº‹ä»¶');
                newPostBtn.addEventListener('click', function(e) {
                    console.log('æ–°æ–‡ç« æŒ‰éˆ•è¢«é»æ“Š');
                    e.preventDefault();
                    openModal();
                });
            } else {
                console.error('æ‰¾ä¸åˆ°æ–°æ–‡ç« æŒ‰éˆ•ï¼');
            }
            
            if (closeBtn) {
                closeBtn.addEventListener('click', closeModal);
            }
            if (cancelBtn) {
                cancelBtn.addEventListener('click', closeModal);
            }
            if (submitBtn) {
                submitBtn.addEventListener('click', handleSubmitPost);
            }
            
            // é»æ“Šæ¨¡æ…‹æ¡†å¤–éƒ¨é—œé–‰
            window.addEventListener('click', (e) => {
                if (e.target === modal) {
                    closeModal();
                }
            });
            
            console.log('äº‹ä»¶ç¶å®šå®Œæˆ');
        }

        // ç¶å®šæ¨™ç±¤äº‹ä»¶
        function bindTagEvents() {
            const tagElements = document.querySelectorAll('.discussion-tag[data-tag], .tag[data-tag]');
            tagElements.forEach(tag => {
                tag.addEventListener('click', (e) => {
                    e.preventDefault();
                    const tagValue = tag.dataset.tag;
                    
                    // å¦‚æœæœ‰æœå°‹è¼¸å…¥æ¡†ï¼Œä½¿ç”¨å®ƒ
                    if (searchInput) {
                        searchInput.value = tagValue;
                        performSearch();
                    } else {
                        // å¦å‰‡ç›´æ¥æœå°‹æ¨™ç±¤
                        currentSearch = tagValue;
                        currentPage = 1;
                        currentCategory = 'all';
                        updateURL();
                        loadPosts();
                    }
                });
            });
        }

        // ç¶å®šåˆ†é äº‹ä»¶
        function bindPaginationEvents() {
            const pageLinks = paginationContainer.querySelectorAll('a[data-page]');
            pageLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    currentPage = parseInt(link.dataset.page);
                    updateURL();
                    loadPosts();
                    window.scrollTo(0, 0);
                });
            });
        }

        // åŸ·è¡Œæœå°‹
        function performSearch() {
            currentSearch = searchInput.value.trim();
            currentPage = 1;
            currentCategory = 'all';
            
            // æ›´æ–°åˆ†é¡é¸ä¸­ç‹€æ…‹
            categoryLinks.forEach(link => {
                link.classList.remove('active');
                if (link.dataset.category === 'all') {
                    link.classList.add('active');
                }
            });
            
            updateURL();
            loadPosts();
        }

        // é–‹å•Ÿæ¨¡æ…‹æ¡†
        function openModal() {
            console.log('openModal å‡½æ•¸è¢«èª¿ç”¨');
            
            // æª¢æŸ¥ç™»å…¥ç‹€æ…‹
            const token = localStorage.getItem('token');
            console.log('ç™»å…¥ç‹€æ…‹æª¢æŸ¥ - token:', token ? 'å­˜åœ¨' : 'ä¸å­˜åœ¨');
            
            if (!token) {
                console.log('ç”¨æˆ¶æœªç™»å…¥ï¼Œé¡¯ç¤ºæç¤º');
                alert('è«‹å…ˆç™»å…¥æ‰èƒ½ç™¼è¡¨æ–‡ç« ');
                window.location.href = 'login.html';
                return;
            }
            
            const modalElement = document.getElementById('post-modal');
            if (modalElement) {
                console.log('é¡¯ç¤ºæ¨¡æ…‹æ¡†');
                // ç§»é™¤æ‰€æœ‰å…§è¯æ¨£å¼ï¼Œå®Œå…¨ä¾è³´CSSé¡åˆ¥
                modalElement.style.removeProperty('display');
                modalElement.classList.add('show');
                console.log('æ¨¡æ…‹æ¡†é¡åˆ¥å·²æ·»åŠ :', modalElement.className);
                console.log('æ¨¡æ…‹æ¡†computedæ¨£å¼:', window.getComputedStyle(modalElement).display);
                initTagInput();
            } else {
                console.error('æ¨¡æ…‹æ¡†å…ƒç´ ä¸å­˜åœ¨ï¼');
            }
        }

        // é—œé–‰æ¨¡æ…‹æ¡†
        function closeModal() {
            const modalElement = document.getElementById('post-modal');
            if (modalElement) {
                modalElement.classList.remove('show');
                console.log('æ¨¡æ…‹æ¡†å·²éš±è—');
                clearForm();
            }
        }

        // æ¸…ç©ºè¡¨å–®
        function clearForm() {
            document.getElementById('post-title').value = '';
            document.getElementById('post-category').value = '';
            document.getElementById('post-content').value = '';
            document.getElementById('tag-input').value = '';
            
            // æ¸…ç©ºæ¨™ç±¤
            const tagItems = document.querySelectorAll('.tag-item');
            tagItems.forEach(item => item.remove());
        }

        // è™•ç†ç™¼è¡¨æ–‡ç« 
        async function handleSubmitPost() {
            const title = document.getElementById('post-title').value.trim();
                const category = document.getElementById('post-category').value;
            const content = document.getElementById('post-content').value.trim();
                
                if (!title || !category || !content) {
                    alert('è«‹å¡«å¯«æ‰€æœ‰å¿…å¡«æ¬„ä½');
                    return;
                }
                
                // æ”¶é›†æ¨™ç±¤
                const tagItems = document.querySelectorAll('.tag-item');
                const tags = Array.from(tagItems).map(item => item.dataset.tagValue);
                
            try {
                submitBtn.disabled = true;
                submitBtn.textContent = 'ç™¼è¡¨ä¸­...';
                
                await communityAPI.createPost({
                    title,
                    category,
                    content,
                    tags
                });
                
                alert('æ–‡ç« ç™¼è¡¨æˆåŠŸï¼');
                closeModal();
                
                // é‡æ–°è¼‰å…¥è²¼æ–‡åˆ—è¡¨
                currentPage = 1;
                loadPosts();
                updateCategoryCounts();
                
            } catch (error) {
                console.error('ç™¼è¡¨æ–‡ç« å¤±æ•—:', error);
                alert('ç™¼è¡¨æ–‡ç« å¤±æ•—ï¼š' + error.message);
            } finally {
                submitBtn.disabled = false;
                submitBtn.textContent = 'ç™¼è¡¨æ–‡ç« ';
            }
        }
        
        // æ¨™ç±¤è¼¸å…¥åŠŸèƒ½
        function initTagInput() {
            const tagInput = document.getElementById('tag-input');
            const tagContainer = document.getElementById('tag-container');
            
            tagInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    
                    const tagValue = tagInput.value.trim();
                    if (!tagValue) return;
                    
                    // æª¢æŸ¥æ˜¯å¦å·²å­˜åœ¨ç›¸åŒæ¨™ç±¤
                    const existingTags = Array.from(tagContainer.querySelectorAll('.tag-item'))
                        .map(tag => tag.dataset.tagValue);
                    
                    if (existingTags.includes(tagValue)) {
                        tagInput.value = '';
                        return;
                    }
                    
                    // é™åˆ¶æœ€å¤š5å€‹æ¨™ç±¤
                    if (existingTags.length >= 5) {
                        alert('æœ€å¤šåªèƒ½æ·»åŠ 5å€‹æ¨™ç±¤');
                        return;
                    }
                    
                    // å‰µå»ºæ¨™ç±¤å…ƒç´ 
                    const tagItem = document.createElement('div');
                    tagItem.className = 'tag-item';
                    tagItem.dataset.tagValue = tagValue;
                    tagItem.innerHTML = `
                        ${tagValue}
                        <span class="tag-remove">&times;</span>
                    `;
                    
                    // é»æ“Šåˆªé™¤æ¨™ç±¤
                    const removeBtn = tagItem.querySelector('.tag-remove');
                    removeBtn.addEventListener('click', () => {
                        tagItem.remove();
                    });
                    
                    // æ’å…¥æ¨™ç±¤å…ƒç´ 
                    tagContainer.insertBefore(tagItem, tagInput);
                    tagInput.value = '';
                }
            });
        }
        
        // æ›´æ–°URL
        function updateURL() {
            const params = new URLSearchParams();
            
            if (currentPage > 1) {
                params.append('page', currentPage);
            }
            
            if (currentCategory !== 'all') {
                params.append('category', currentCategory);
            }
            
            if (currentSearch) {
                params.append('search', currentSearch);
            }
            
            const newURL = `${window.location.pathname}${params.toString() ? '?' + params.toString() : ''}`;
            window.history.pushState(null, '', newURL);
        }

        // é¡¯ç¤ºè¼‰å…¥ç‹€æ…‹
        function showLoading() {
            loadingIndicator.style.display = 'block';
            discussionsGrid.style.opacity = '0.5';
        }

        // éš±è—è¼‰å…¥ç‹€æ…‹
        function hideLoading() {
            loadingIndicator.style.display = 'none';
            discussionsGrid.style.opacity = '1';
        }

        // é¡¯ç¤ºéŒ¯èª¤è¨Šæ¯
        function showError(message) {
            discussionsGrid.innerHTML = `<div class="error-message">${message}</div>`;
        }

        // æ ¼å¼åŒ–æ—¥æœŸ
        function formatDate(dateString) {
            const date = new Date(dateString);
            const now = new Date();
            const diffTime = Math.abs(now - date);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            
            if (diffDays === 1) {
                return '1å¤©å‰';
            } else if (diffDays < 7) {
                return `${diffDays}å¤©å‰`;
            } else if (diffDays < 30) {
                const weeks = Math.floor(diffDays / 7);
                return `${weeks}é€±å‰`;
            } else {
                return date.toLocaleDateString('zh-TW');
            }
        }

        // æ¸¬è©¦å‡½æ•¸ - ç›´æ¥æ¸¬è©¦æŒ‰éˆ•åŠŸèƒ½
        function testButton() {
            console.log('=== æŒ‰éˆ•æ¸¬è©¦é–‹å§‹ ===');
            
            setTimeout(() => {
                const btn = document.getElementById('new-post-btn');
                console.log('æŒ‰éˆ•å…ƒç´ :', btn);
                console.log('æŒ‰éˆ•é¡åˆ¥:', btn ? btn.className : 'æŒ‰éˆ•ä¸å­˜åœ¨');
                console.log('æŒ‰éˆ•æ–‡å­—:', btn ? btn.textContent : 'æŒ‰éˆ•ä¸å­˜åœ¨');
                console.log('æŒ‰éˆ•çˆ¶å…ƒç´ :', btn ? btn.parentElement : 'æŒ‰éˆ•ä¸å­˜åœ¨');
                
                if (btn) {
                    console.log('å˜—è©¦ç›´æ¥é»æ“ŠæŒ‰éˆ•...');
                    btn.click();
                }
                
                // æª¢æŸ¥æ¨¡æ…‹æ¡†
                const modal = document.getElementById('post-modal');
                console.log('æ¨¡æ…‹æ¡†å…ƒç´ :', modal);
                console.log('æ¨¡æ…‹æ¡†æ¨£å¼:', modal ? window.getComputedStyle(modal).display : 'æ¨¡æ…‹æ¡†ä¸å­˜åœ¨');
                
                console.log('=== æŒ‰éˆ•æ¸¬è©¦çµæŸ ===');
            }, 2000);
        }
        
        // åœ¨é é¢è¼‰å…¥å¾ŒåŸ·è¡Œæ¸¬è©¦
        setTimeout(testButton, 3000);
        
        // å‚™ç”¨æ–¹æ¡ˆï¼šç›´æ¥åœ¨DOMè¼‰å…¥å®Œæˆå¾Œç«‹å³ç¶å®šæŒ‰éˆ•äº‹ä»¶
        document.addEventListener('DOMContentLoaded', function() {
            // ç­‰å¾…ä¸€å°æ®µæ™‚é–“ç¢ºä¿DOMå®Œå…¨æº–å‚™å¥½
            setTimeout(() => {
                const backupBtn = document.getElementById('new-post-btn');
                console.log('å‚™ç”¨æ–¹æ¡ˆï¼šæŸ¥æ‰¾æŒ‰éˆ•', backupBtn);
                
                if (backupBtn) {
                    // ç§»é™¤å¯èƒ½å­˜åœ¨çš„èˆŠäº‹ä»¶ç›£è½å™¨
                    const newBtn = backupBtn.cloneNode(true);
                    backupBtn.parentNode.replaceChild(newBtn, backupBtn);
                    
                    // ç›´æ¥ç¶å®šé»æ“Šäº‹ä»¶
                    newBtn.addEventListener('click', function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        console.log('å‚™ç”¨æ–¹æ¡ˆï¼šæŒ‰éˆ•è¢«é»æ“Šï¼');
                        
                        // æª¢æŸ¥ç™»å…¥ç‹€æ…‹
                        const token = localStorage.getItem('token');
                        if (!token) {
                            alert('è«‹å…ˆç™»å…¥æ‰èƒ½ç™¼è¡¨æ–‡ç« ');
                            window.location.href = 'login.html';
                            return;
                        }
                        
                        // ç›´æ¥é¡¯ç¤ºæ¨¡æ…‹æ¡†
                        const modal = document.getElementById('post-modal');
                        if (modal) {
                            modal.style.removeProperty('display');
                            modal.classList.add('show');
                            console.log('å‚™ç”¨æ–¹æ¡ˆï¼šæ¨¡æ…‹æ¡†å·²é¡¯ç¤º');
                            console.log('å‚™ç”¨æ–¹æ¡ˆï¼šæ¨¡æ…‹æ¡†é¡åˆ¥:', modal.className);
                            console.log('å‚™ç”¨æ–¹æ¡ˆï¼šæ¨¡æ…‹æ¡†computedæ¨£å¼:', window.getComputedStyle(modal).display);
                        } else {
                            console.error('å‚™ç”¨æ–¹æ¡ˆï¼šæ‰¾ä¸åˆ°æ¨¡æ…‹æ¡†');
                        }
                    });
                    
                    console.log('å‚™ç”¨æ–¹æ¡ˆï¼šäº‹ä»¶ç¶å®šå®Œæˆ');
                } else {
                    console.error('å‚™ç”¨æ–¹æ¡ˆï¼šæ‰¾ä¸åˆ°æŒ‰éˆ•');
                }
            }, 500);
        });
        
        // æ¸¬è©¦ç”¨æ¨¡æ“¬æ•¸æ“š - ç¢ºä¿æ‰€æœ‰è²¼æ–‡éƒ½æœ‰é è¨­é ­åƒ
        function loadTestPosts() {
            const testPosts = [
                {
                    _id: 'test1',
                    title: 'æˆ‘çš„ç¬¬ä¸€æ¬¡æ”¹è£ç¶“é©—åˆ†äº«',
                    author: 'æ”¹è£æ–°æ‰‹',
                    avatar: '', // ç©ºé ­åƒæ¸¬è©¦é è¨­é ­åƒ
                    createdAt: new Date().toISOString(),
                    category: 'æ’æ°£ç³»çµ±',
                    excerpt: 'æœ€è¿‘å®Œæˆäº†æˆ‘çš„ç¬¬ä¸€æ¬¡æ‘©æ‰˜è»Šæ”¹è£ï¼Œæƒ³è·Ÿå¤§å®¶åˆ†äº«ä¸€ä¸‹ç¶“é©—...',
                    tags: ['æ–°æ‰‹', 'æ’æ°£ç®¡', 'ç¶“é©—åˆ†äº«'],
                    likes: 15,
                    views: 234,
                    commentCount: 8
                },
                {
                    _id: 'test2',
                    title: 'é¸æ“‡é¿éœ‡å™¨çš„å¹¾å€‹è¦é»',
                    author: 'è»Šå‹å¤§ç¥',
                    avatar: null, // nullé ­åƒæ¸¬è©¦é è¨­é ­åƒ
                    createdAt: new Date(Date.now() - 24*60*60*1000).toISOString(),
                    category: 'æ‡¸åŠç³»çµ±',
                    excerpt: 'é¿éœ‡å™¨æ˜¯å½±éŸ¿é¨ä¹˜èˆ’é©åº¦å’Œæ“æ§æ€§çš„é‡è¦é›¶ä»¶ï¼Œé¸æ“‡æ™‚éœ€è¦æ³¨æ„...',
                    tags: ['é¿éœ‡å™¨', 'é¸è³¼æŒ‡å—', 'æ‡¸åŠ'],
                    likes: 42,
                    views: 567,
                    commentCount: 23
                },
                {
                    _id: 'test3',
                    title: 'LEDå¤§ç‡ˆæ”¹è£å¿ƒå¾—',
                    author: 'å¤œé¨ä¿ ',
                    // å®Œå…¨ä¸è¨­ç½®avatarå±¬æ€§
                    createdAt: new Date(Date.now() - 2*24*60*60*1000).toISOString(),
                    category: 'é›»å­ç³»çµ±',
                    excerpt: 'LEDå¤§ç‡ˆä¸åƒ…çœé›»ï¼Œäº®åº¦ä¹Ÿæ¯”å‚³çµ±ç‡ˆæ³¡å¥½å¾ˆå¤šï¼Œä»Šå¤©ä¾†åˆ†äº«æ”¹è£éç¨‹...',
                    tags: ['LED', 'å¤§ç‡ˆ', 'ç…§æ˜'],
                    likes: 28,
                    views: 189,
                    commentCount: 12
                }
            ];
            
            displayPosts(testPosts);
            document.getElementById('discussion-count').textContent = `æ‰¾åˆ° ${testPosts.length} ç¯‡è¨è«–æ–‡ç« `;
        }
        
        // å¦‚æœç„¡æ³•è¼‰å…¥çœŸå¯¦æ•¸æ“šï¼Œå‰‡è¼‰å…¥æ¸¬è©¦æ•¸æ“š
        setTimeout(() => {
            const gridContent = document.getElementById('discussions-grid').innerHTML;
            if (!gridContent || gridContent.includes('è¼‰å…¥ä¸­') || gridContent.includes('æ²’æœ‰æ‰¾åˆ°')) {
                console.log('è¼‰å…¥æ¸¬è©¦æ•¸æ“šä»¥ç¢ºä¿é è¨­é ­åƒæ­£å¸¸é¡¯ç¤º');
                loadTestPosts();
            }
        }, 5000);
    </script>
</body>
</html>